{"version":3,"sources":["flickity.js"],"names":["window","factory","define","amd","jQuery","module","exports","require","jQueryBridget","arraySlice","Array","prototype","slice","console","logError","message","error","namespace","PluginClass","$","option","opts","isPlainObject","this","options","extend","fn","arg0","args","call","arguments","pluginMethodStr","methodName","$elems","each","i","elem","instance","data","method","charAt","value","apply","returnValue","undefined","_init","updateJQuery","bridget","global","EvEmitter","proto","on","eventName","listener","events","_events","listeners","indexOf","push","once","onceEvents","_onceEvents","off","length","index","splice","emitEvent","onceListeners","allOff","getSize","getStyleSize","num","parseFloat","isNaN","measurements","measurementsLength","getStyle","style","getComputedStyle","isBoxSizeOuter","isSetup","div","document","createElement","width","padding","borderStyle","borderWidth","boxSizing","body","documentElement","appendChild","removeChild","setup","querySelector","nodeType","display","size","height","innerWidth","innerHeight","outerWidth","outerHeight","getZeroSize","offsetWidth","offsetHeight","isBorderBox","measurement","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","selector","fizzyUIUtils","utils","a","b","prop","modulo","makeArray","obj","ary","isArray","removeFrom","getParent","parentNode","getQueryElement","handleEvent","event","type","filterFindElements","elems","ffElems","forEach","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","clearTimeout","_this","setTimeout","docReady","callback","readyState","addEventListener","toDashed","str","replace","match","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","attr","getAttribute","JSON","parse","className","Flickity","Cell","parent","element","create","position","x","shift","destroy","side","originSide","setPosition","updateTarget","renderPosition","setDefaultTarget","marginProperty","target","cellAlign","getPositionValue","wrapShift","slideableWidth","remove","Slide","isOriginLeft","cells","addCell","cell","Math","max","beginMargin","firstMargin","endMargin","lastCell","getLastCell","lastMargin","slideWidth","select","changeSelectedClass","unselect","classList","getCellElements","map","animatePrototype","requestAnimationFrame","webkitRequestAnimationFrame","lastTime","currTime","Date","getTime","timeToCall","id","startAnimation","isAnimating","restingFrames","animate","applyDragForce","applySelectedAttraction","previousX","integratePhysics","positionSlider","settle","transformProperty","transform","wrapAround","shiftWrapCells","cursorPosition","rightToLeft","slider","firstSlide","slides","positionX","progress","slidesWidth","dispatchEvent","positionSliderAtSelected","selectedSlide","percentPosition","round","isPointerDown","isFreeScrolling","beforeGap","_shiftCells","beforeShiftCells","afterGap","afterShiftCells","gap","cellShift","_unshiftCells","velocity","getFrictionFactor","applyForce","force","getRestingPosition","dragForce","dragX","selectedAttraction","_Flickity","moveElements","toElem","GUID","instances","queryElement","flickityGUID","$element","constructor","defaults","_create","accessibility","freeScrollFriction","friction","namespaceJQueryEvents","resize","setGallerySize","createMethods","guid","selectedIndex","viewport","_createSlider","watchCSS","activate","isActive","add","_filterFindCellElements","children","reloadCells","tabIndex","initialIndex","isInitActivated","cellSelector","_makeCells","positionCells","_getWrapShiftCells","cellElem","getLastSlide","_sizeCells","_positionCells","maxCellHeight","cellX","startCell","len","updateSlides","_containSlides","slide","nextMargin","canCellFit","_getCanCellFit","updateSelectedSlide","groupCells","number","parseInt","percentMatch","percent","reposition","setCellAlign","cellAlignShorthands","center","left","right","shorthand","adaptiveHeight","gapX","cellIndex","_getGapCells","increment","contain","isRightToLeft","contentWidth","isContentSmaller","beginBound","endBound","min","emitArgs","$event","jQEvent","Event","trigger","isWrap","isInstant","_wrapSelect","wrapIndex","delta","abs","backWrapDelta","forewardWrapDelta","isDragSelect","previous","next","unselectSelectedSlide","selectedCells","selectedElements","selectedCell","selectedElement","selectCell","getCell","getCells","getParentCell","getAdjacentCellElements","adjCount","cellElems","slideIndex","uiChange","childUIPointerDown","onresize","content","deactivate","onkeydown","activeElement","keyCode","leftMethod","rightMethod","removeAttribute","removeEventListener","removeData","setJQuery","jq","Unipointer","Object","bindStartEvent","_bindStartEvent","unbindStartEvent","isBind","bindMethod","PointerEvent","getTouch","touches","touch","identifier","pointerIdentifier","onmousedown","button","_pointerDown","ontouchstart","changedTouches","onpointerdown","pointer","pointerId","pointerDown","_bindPostStartEvents","postStartEvents","mousedown","touchstart","pointerdown","_boundPointerEvents","_unbindPostStartEvents","onmousemove","_pointerMove","onpointermove","ontouchmove","pointerMove","onmouseup","_pointerUp","onpointerup","ontouchend","_pointerDone","pointerUp","pointerDone","onpointercancel","_pointerCancel","ontouchcancel","pointerCancel","getPointerPoint","pageX","y","pageY","Unidragger","bindHandles","_bindHandles","unbindHandles","handles","handle","touchAction","_touchActionValue","nodeName","_dragPointerDown","focused","blur","pointerDownPoint","canPreventDefaultOnPointerDown","preventDefault","moveVector","_dragPointerMove","_dragMove","movePoint","isDragging","hasDragStarted","_dragStart","_dragPointerUp","_dragEnd","_staticClick","dragStartPoint","isPreventingClicks","dragStart","dragMove","bind","dragEnd","onclick","isIgnoringMouseUp","focus","staticClick","draggable","dragThreshold","isTouch","isTouchmoveScrollCanceled","_createDrag","bindDrag","_uiChangeDrag","_childUIPointerDownDrag","unbindDrag","isDragBound","pointerDownFocus","cursorNodes","TEXTAREA","INPUT","OPTION","clickTypes","radio","checkbox","submit","image","file","pointerDownScroll","getScrollPosition","canPointerDown","getCanPointerDown","prevScrollY","pageYOffset","scrollTo","pageXOffset","focusNodes","SELECT","isTouchStart","isTouchPointer","pointerType","isFocusNode","isTouchScrolling","dragStartPosition","previousDragX","direction","originBound","dragMoveTime","freeScroll","dragEndRestingSelect","restingX","dragEndBoostSelect","distance","getSlideDistance","positiveResting","_getClosestResting","negativeResting","minDistance","Infinity","condition","d","md","isWrapAround","wrap","floor","clickedCell","onscroll","scroll","scrollMoveX","scrollMoveY","TapListener","bindTap","unbindTap","tapElement","pointerPoint","boundingRect","getBoundingClientRect","scrollX","scrollY","top","bottom","svgURI","PrevNextButton","isEnabled","isPrevious","leftDirection","isLeft","setAttribute","disable","svg","createSVG","onTap","update","createElementNS","path","pathMovements","shape","x0","x1","y1","x2","y2","x3","getArrowMovements","arrowShape","enable","disabled","lastIndex","boundIndex","prevNextButtons","_createPrevNextButtons","prevButton","nextButton","activatePrevNextButtons","deactivatePrevNextButtons","PageDots","holder","dots","setDots","addDots","removeDots","count","fragment","createDocumentFragment","newDots","dot","updateSelected","selectedDot","pageDots","_createPageDots","activatePageDots","updateSelectedPageDots","updatePageDots","deactivatePageDots","hiddenProperty","visibilityEvent","Player","state","onVisibilityChange","visibilityChange","onVisibilityPlay","visibilityPlay","play","isPageHidden","tick","time","autoPlay","clear","stop","pause","unpause","pauseAutoPlayOnHover","_createPlayer","player","activatePlayer","stopPlayer","deactivatePlayer","playPlayer","pausePlayer","unpausePlayer","onmouseenter","onmouseleave","insert","isAppend","insertCellElement","insertBefore","endCells","selectedIndexDelta","_cellAddedRemoved","append","prepend","changedCellIndex","cellChange","cellSizeChange","isPositioningSlider","prevSlideableWidth","deltaX","LazyLoader","img","flickity","load","_createLazyload","lazyLoad","lazyImages","lazyCellImages","imgs","getCellLazyImages","src","onload","complete","onerror","_createAsNavFor","activateAsNavFor","deactivateAsNavFor","destroyAsNavFor","asNavForOption","asNavFor","setNavCompanion","companion","navCompanion","onNavCompanionSelect","navCompanionSelect","onNavStaticClick","t","firstIndex","selectIndex","removeNavSelectedElements","navSelectedElements","changeNavSelectedClass","navElem","cellElement","imagesLoaded","ImagesLoaded","onAlways","elements","getImages","jqDeferred","Deferred","check","images","addElementImages","addImage","background","addElementBackgroundImages","elementNodeTypes","childImgs","child","1","9","11","LoadingImage","Background","url","Image","reURL","exec","backgroundImage","addBackground","loadingImage","onProgress","progressedCount","hasAnyBroken","isLoaded","notify","debug","log","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","unbindEvents","makeJQueryPlugin","promise","_createImagesLoaded"],"mappings":"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","file":"plugins.js","sourcesContent":["/*!\r\n * Flickity PACKAGED v2.0.10\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * http://flickity.metafizzy.co\r\n * Copyright 2017 Metafizzy\r\n */\r\n\r\n/**\r\n * Bridget makes jQuery widgets\r\n * v2.0.1\r\n * MIT license\r\n */\r\n\r\n/* jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\r\n      return factory( window, jQuery );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('jquery')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.jQueryBridget = factory(\r\n      window,\r\n      window.jQuery\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, jQuery ) {\r\n'use strict';\r\n\r\n// ----- utils ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// helper function for logging errors\r\n// $.error breaks jQuery chaining\r\nvar console = window.console;\r\nvar logError = typeof console == 'undefined' ? function() {} :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// ----- jQueryBridget ----- //\r\n\r\nfunction jQueryBridget( namespace, PluginClass, $ ) {\r\n  $ = $ || jQuery || window.jQuery;\r\n  if ( !$ ) {\r\n    return;\r\n  }\r\n\r\n  // add option method -> $().plugin('option', {...})\r\n  if ( !PluginClass.prototype.option ) {\r\n    // option setter\r\n    PluginClass.prototype.option = function( opts ) {\r\n      // bail out if not an object\r\n      if ( !$.isPlainObject( opts ) ){\r\n        return;\r\n      }\r\n      this.options = $.extend( true, this.options, opts );\r\n    };\r\n  }\r\n\r\n  // make jQuery plugin\r\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\r\n    if ( typeof arg0 == 'string' ) {\r\n      // method call $().plugin( 'methodName', { options } )\r\n      // shift arguments by 1\r\n      var args = arraySlice.call( arguments, 1 );\r\n      return methodCall( this, arg0, args );\r\n    }\r\n    // just $().plugin({ options })\r\n    plainCall( this, arg0 );\r\n    return this;\r\n  };\r\n\r\n  // $().plugin('methodName')\r\n  function methodCall( $elems, methodName, args ) {\r\n    var returnValue;\r\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\r\n\r\n    $elems.each( function( i, elem ) {\r\n      // get instance\r\n      var instance = $.data( elem, namespace );\r\n      if ( !instance ) {\r\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\r\n          pluginMethodStr );\r\n        return;\r\n      }\r\n\r\n      var method = instance[ methodName ];\r\n      if ( !method || methodName.charAt(0) == '_' ) {\r\n        logError( pluginMethodStr + ' is not a valid method' );\r\n        return;\r\n      }\r\n\r\n      // apply method, get return value\r\n      var value = method.apply( instance, args );\r\n      // set return value if value is returned, use only first value\r\n      returnValue = returnValue === undefined ? value : returnValue;\r\n    });\r\n\r\n    return returnValue !== undefined ? returnValue : $elems;\r\n  }\r\n\r\n  function plainCall( $elems, options ) {\r\n    $elems.each( function( i, elem ) {\r\n      var instance = $.data( elem, namespace );\r\n      if ( instance ) {\r\n        // set options & init\r\n        instance.option( options );\r\n        instance._init();\r\n      } else {\r\n        // initialize new instance\r\n        instance = new PluginClass( elem, options );\r\n        $.data( elem, namespace, instance );\r\n      }\r\n    });\r\n  }\r\n\r\n  updateJQuery( $ );\r\n\r\n}\r\n\r\n// ----- updateJQuery ----- //\r\n\r\n// set $.bridget for v1 backwards compatibility\r\nfunction updateJQuery( $ ) {\r\n  if ( !$ || ( $ && $.bridget ) ) {\r\n    return;\r\n  }\r\n  $.bridget = jQueryBridget;\r\n}\r\n\r\nupdateJQuery( jQuery || window.jQuery );\r\n\r\n// -----  ----- //\r\n\r\nreturn jQueryBridget;\r\n\r\n}));\r\n\r\n/**\r\n * EvEmitter v1.1.0\r\n * Lil' event emitter\r\n * MIT License\r\n */\r\n\r\n/* jshint unused: true, undef: true, strict: true */\r\n\r\n( function( global, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, window */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'ev-emitter/ev-emitter',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.EvEmitter = factory();\r\n  }\r\n\r\n}( typeof window != 'undefined' ? window : this, function() {\r\n\r\n\r\n\r\nfunction EvEmitter() {}\r\n\r\nvar proto = EvEmitter.prototype;\r\n\r\nproto.on = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // set events hash\r\n  var events = this._events = this._events || {};\r\n  // set listeners array\r\n  var listeners = events[ eventName ] = events[ eventName ] || [];\r\n  // only add once\r\n  if ( listeners.indexOf( listener ) == -1 ) {\r\n    listeners.push( listener );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.once = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // add event\r\n  this.on( eventName, listener );\r\n  // set once flag\r\n  // set onceEvents hash\r\n  var onceEvents = this._onceEvents = this._onceEvents || {};\r\n  // set onceListeners object\r\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\r\n  // set flag\r\n  onceListeners[ listener ] = true;\r\n\r\n  return this;\r\n};\r\n\r\nproto.off = function( eventName, listener ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  var index = listeners.indexOf( listener );\r\n  if ( index != -1 ) {\r\n    listeners.splice( index, 1 );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.emitEvent = function( eventName, args ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  // copy over to avoid interference if .off() in listener\r\n  listeners = listeners.slice(0);\r\n  args = args || [];\r\n  // once stuff\r\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\r\n\r\n  for ( var i=0; i < listeners.length; i++ ) {\r\n    var listener = listeners[i]\r\n    var isOnce = onceListeners && onceListeners[ listener ];\r\n    if ( isOnce ) {\r\n      // remove listener\r\n      // remove before trigger to prevent recursion\r\n      this.off( eventName, listener );\r\n      // unset once flag\r\n      delete onceListeners[ listener ];\r\n    }\r\n    // trigger listener\r\n    listener.apply( this, args );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.allOff = function() {\r\n  delete this._events;\r\n  delete this._onceEvents;\r\n};\r\n\r\nreturn EvEmitter;\r\n\r\n}));\r\n\r\n/*!\r\n * getSize v2.0.2\r\n * measure size of elements\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n/*global define: false, module: false, console: false */\r\n\r\n( function( window, factory ) {\r\n  'use strict';\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'get-size/get-size',[],function() {\r\n      return factory();\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.getSize = factory();\r\n  }\r\n\r\n})( window, function factory() {\r\n'use strict';\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// get a number from a string, not a percentage\r\nfunction getStyleSize( value ) {\r\n  var num = parseFloat( value );\r\n  // not a percent like '100%', and a number\r\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\r\n  return isValid && num;\r\n}\r\n\r\nfunction noop() {}\r\n\r\nvar logError = typeof console == 'undefined' ? noop :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// -------------------------- measurements -------------------------- //\r\n\r\nvar measurements = [\r\n  'paddingLeft',\r\n  'paddingRight',\r\n  'paddingTop',\r\n  'paddingBottom',\r\n  'marginLeft',\r\n  'marginRight',\r\n  'marginTop',\r\n  'marginBottom',\r\n  'borderLeftWidth',\r\n  'borderRightWidth',\r\n  'borderTopWidth',\r\n  'borderBottomWidth'\r\n];\r\n\r\nvar measurementsLength = measurements.length;\r\n\r\nfunction getZeroSize() {\r\n  var size = {\r\n    width: 0,\r\n    height: 0,\r\n    innerWidth: 0,\r\n    innerHeight: 0,\r\n    outerWidth: 0,\r\n    outerHeight: 0\r\n  };\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    size[ measurement ] = 0;\r\n  }\r\n  return size;\r\n}\r\n\r\n// -------------------------- getStyle -------------------------- //\r\n\r\n/**\r\n * getStyle, get style of element, check for Firefox bug\r\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\r\n */\r\nfunction getStyle( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    logError( 'Style returned ' + style +\r\n      '. Are you running this code in a hidden iframe on Firefox? ' +\r\n      'See http://bit.ly/getsizebug1' );\r\n  }\r\n  return style;\r\n}\r\n\r\n// -------------------------- setup -------------------------- //\r\n\r\nvar isSetup = false;\r\n\r\nvar isBoxSizeOuter;\r\n\r\n/**\r\n * setup\r\n * check isBoxSizerOuter\r\n * do on first getSize() rather than on page load for Firefox bug\r\n */\r\nfunction setup() {\r\n  // setup once\r\n  if ( isSetup ) {\r\n    return;\r\n  }\r\n  isSetup = true;\r\n\r\n  // -------------------------- box sizing -------------------------- //\r\n\r\n  /**\r\n   * WebKit measures the outer-width on style.width on border-box elems\r\n   * IE & Firefox<29 measures the inner-width\r\n   */\r\n  var div = document.createElement('div');\r\n  div.style.width = '200px';\r\n  div.style.padding = '1px 2px 3px 4px';\r\n  div.style.borderStyle = 'solid';\r\n  div.style.borderWidth = '1px 2px 3px 4px';\r\n  div.style.boxSizing = 'border-box';\r\n\r\n  var body = document.body || document.documentElement;\r\n  body.appendChild( div );\r\n  var style = getStyle( div );\r\n\r\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\r\n  body.removeChild( div );\r\n\r\n}\r\n\r\n// -------------------------- getSize -------------------------- //\r\n\r\nfunction getSize( elem ) {\r\n  setup();\r\n\r\n  // use querySeletor if elem is string\r\n  if ( typeof elem == 'string' ) {\r\n    elem = document.querySelector( elem );\r\n  }\r\n\r\n  // do not proceed on non-objects\r\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\r\n    return;\r\n  }\r\n\r\n  var style = getStyle( elem );\r\n\r\n  // if hidden, everything is 0\r\n  if ( style.display == 'none' ) {\r\n    return getZeroSize();\r\n  }\r\n\r\n  var size = {};\r\n  size.width = elem.offsetWidth;\r\n  size.height = elem.offsetHeight;\r\n\r\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\r\n\r\n  // get all measurements\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    var value = style[ measurement ];\r\n    var num = parseFloat( value );\r\n    // any 'auto', 'medium' value will be 0\r\n    size[ measurement ] = !isNaN( num ) ? num : 0;\r\n  }\r\n\r\n  var paddingWidth = size.paddingLeft + size.paddingRight;\r\n  var paddingHeight = size.paddingTop + size.paddingBottom;\r\n  var marginWidth = size.marginLeft + size.marginRight;\r\n  var marginHeight = size.marginTop + size.marginBottom;\r\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\r\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\r\n\r\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\r\n\r\n  // overwrite width and height if we can get it from style\r\n  var styleWidth = getStyleSize( style.width );\r\n  if ( styleWidth !== false ) {\r\n    size.width = styleWidth +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\r\n  }\r\n\r\n  var styleHeight = getStyleSize( style.height );\r\n  if ( styleHeight !== false ) {\r\n    size.height = styleHeight +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\r\n  }\r\n\r\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\r\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\r\n\r\n  size.outerWidth = size.width + marginWidth;\r\n  size.outerHeight = size.height + marginHeight;\r\n\r\n  return size;\r\n}\r\n\r\nreturn getSize;\r\n\r\n});\r\n\r\n/**\r\n * matchesSelector v2.0.2\r\n * matchesSelector( element, '.selector' )\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  /*global define: false, module: false */\r\n  'use strict';\r\n  // universal module definition\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'desandro-matches-selector/matches-selector',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.matchesSelector = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n  'use strict';\r\n\r\n  var matchesMethod = ( function() {\r\n    var ElemProto = window.Element.prototype;\r\n    // check for the standard method name first\r\n    if ( ElemProto.matches ) {\r\n      return 'matches';\r\n    }\r\n    // check un-prefixed\r\n    if ( ElemProto.matchesSelector ) {\r\n      return 'matchesSelector';\r\n    }\r\n    // check vendor prefixes\r\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\r\n\r\n    for ( var i=0; i < prefixes.length; i++ ) {\r\n      var prefix = prefixes[i];\r\n      var method = prefix + 'MatchesSelector';\r\n      if ( ElemProto[ method ] ) {\r\n        return method;\r\n      }\r\n    }\r\n  })();\r\n\r\n  return function matchesSelector( elem, selector ) {\r\n    return elem[ matchesMethod ]( selector );\r\n  };\r\n\r\n}));\r\n\r\n/**\r\n * Fizzy UI utils v2.0.5\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'fizzy-ui-utils/utils',[\r\n      'desandro-matches-selector/matches-selector'\r\n    ], function( matchesSelector ) {\r\n      return factory( window, matchesSelector );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('desandro-matches-selector')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.fizzyUIUtils = factory(\r\n      window,\r\n      window.matchesSelector\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, matchesSelector ) {\r\n\r\n\r\n\r\nvar utils = {};\r\n\r\n// ----- extend ----- //\r\n\r\n// extends objects\r\nutils.extend = function( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n};\r\n\r\n// ----- modulo ----- //\r\n\r\nutils.modulo = function( num, div ) {\r\n  return ( ( num % div ) + div ) % div;\r\n};\r\n\r\n// ----- makeArray ----- //\r\n\r\n// turn element or nodeList into an array\r\nutils.makeArray = function( obj ) {\r\n  var ary = [];\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    ary = obj;\r\n  } else if ( obj && typeof obj == 'object' &&\r\n    typeof obj.length == 'number' ) {\r\n    // convert nodeList to array\r\n    for ( var i=0; i < obj.length; i++ ) {\r\n      ary.push( obj[i] );\r\n    }\r\n  } else {\r\n    // array of single index\r\n    ary.push( obj );\r\n  }\r\n  return ary;\r\n};\r\n\r\n// ----- removeFrom ----- //\r\n\r\nutils.removeFrom = function( ary, obj ) {\r\n  var index = ary.indexOf( obj );\r\n  if ( index != -1 ) {\r\n    ary.splice( index, 1 );\r\n  }\r\n};\r\n\r\n// ----- getParent ----- //\r\n\r\nutils.getParent = function( elem, selector ) {\r\n  while ( elem.parentNode && elem != document.body ) {\r\n    elem = elem.parentNode;\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      return elem;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- getQueryElement ----- //\r\n\r\n// use element as selector string\r\nutils.getQueryElement = function( elem ) {\r\n  if ( typeof elem == 'string' ) {\r\n    return document.querySelector( elem );\r\n  }\r\n  return elem;\r\n};\r\n\r\n// ----- handleEvent ----- //\r\n\r\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\r\nutils.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// ----- filterFindElements ----- //\r\n\r\nutils.filterFindElements = function( elems, selector ) {\r\n  // make array of elems\r\n  elems = utils.makeArray( elems );\r\n  var ffElems = [];\r\n\r\n  elems.forEach( function( elem ) {\r\n    // check that elem is an actual element\r\n    if ( !( elem instanceof HTMLElement ) ) {\r\n      return;\r\n    }\r\n    // add elem if no selector\r\n    if ( !selector ) {\r\n      ffElems.push( elem );\r\n      return;\r\n    }\r\n    // filter & find items if we have a selector\r\n    // filter\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      ffElems.push( elem );\r\n    }\r\n    // find children\r\n    var childElems = elem.querySelectorAll( selector );\r\n    // concat childElems to filterFound array\r\n    for ( var i=0; i < childElems.length; i++ ) {\r\n      ffElems.push( childElems[i] );\r\n    }\r\n  });\r\n\r\n  return ffElems;\r\n};\r\n\r\n// ----- debounceMethod ----- //\r\n\r\nutils.debounceMethod = function( _class, methodName, threshold ) {\r\n  // original method\r\n  var method = _class.prototype[ methodName ];\r\n  var timeoutName = methodName + 'Timeout';\r\n\r\n  _class.prototype[ methodName ] = function() {\r\n    var timeout = this[ timeoutName ];\r\n    if ( timeout ) {\r\n      clearTimeout( timeout );\r\n    }\r\n    var args = arguments;\r\n\r\n    var _this = this;\r\n    this[ timeoutName ] = setTimeout( function() {\r\n      method.apply( _this, args );\r\n      delete _this[ timeoutName ];\r\n    }, threshold || 100 );\r\n  };\r\n};\r\n\r\n// ----- docReady ----- //\r\n\r\nutils.docReady = function( callback ) {\r\n  var readyState = document.readyState;\r\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\r\n    // do async to allow for other scripts to run. metafizzy/flickity#441\r\n    setTimeout( callback );\r\n  } else {\r\n    document.addEventListener( 'DOMContentLoaded', callback );\r\n  }\r\n};\r\n\r\n// ----- htmlInit ----- //\r\n\r\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\r\nutils.toDashed = function( str ) {\r\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\r\n    return $1 + '-' + $2;\r\n  }).toLowerCase();\r\n};\r\n\r\nvar console = window.console;\r\n/**\r\n * allow user to initialize classes via [data-namespace] or .js-namespace class\r\n * htmlInit( Widget, 'widgetName' )\r\n * options are parsed from data-namespace-options\r\n */\r\nutils.htmlInit = function( WidgetClass, namespace ) {\r\n  utils.docReady( function() {\r\n    var dashedNamespace = utils.toDashed( namespace );\r\n    var dataAttr = 'data-' + dashedNamespace;\r\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\r\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\r\n    var elems = utils.makeArray( dataAttrElems )\r\n      .concat( utils.makeArray( jsDashElems ) );\r\n    var dataOptionsAttr = dataAttr + '-options';\r\n    var jQuery = window.jQuery;\r\n\r\n    elems.forEach( function( elem ) {\r\n      var attr = elem.getAttribute( dataAttr ) ||\r\n        elem.getAttribute( dataOptionsAttr );\r\n      var options;\r\n      try {\r\n        options = attr && JSON.parse( attr );\r\n      } catch ( error ) {\r\n        // log error, do not initialize\r\n        if ( console ) {\r\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\r\n          ': ' + error );\r\n        }\r\n        return;\r\n      }\r\n      // initialize\r\n      var instance = new WidgetClass( elem, options );\r\n      // make available via $().data('namespace')\r\n      if ( jQuery ) {\r\n        jQuery.data( elem, namespace, instance );\r\n      }\r\n    });\r\n\r\n  });\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn utils;\r\n\r\n}));\r\n\r\n// Flickity.Cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/cell',[\r\n      'get-size/get-size'\r\n    ], function( getSize ) {\r\n      return factory( window, getSize );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('get-size')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Cell = factory(\r\n      window,\r\n      window.getSize\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, getSize ) {\r\n\r\n\r\n\r\nfunction Cell( elem, parent ) {\r\n  this.element = elem;\r\n  this.parent = parent;\r\n\r\n  this.create();\r\n}\r\n\r\nvar proto = Cell.prototype;\r\n\r\nproto.create = function() {\r\n  this.element.style.position = 'absolute';\r\n  this.x = 0;\r\n  this.shift = 0;\r\n};\r\n\r\nproto.destroy = function() {\r\n  // reset style\r\n  this.element.style.position = '';\r\n  var side = this.parent.originSide;\r\n  this.element.style[ side ] = '';\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n};\r\n\r\nproto.setPosition = function( x ) {\r\n  this.x = x;\r\n  this.updateTarget();\r\n  this.renderPosition( x );\r\n};\r\n\r\n// setDefaultTarget v1 method, backwards compatibility, remove in v3\r\nproto.updateTarget = proto.setDefaultTarget = function() {\r\n  var marginProperty = this.parent.originSide == 'left' ? 'marginLeft' : 'marginRight';\r\n  this.target = this.x + this.size[ marginProperty ] +\r\n    this.size.width * this.parent.cellAlign;\r\n};\r\n\r\nproto.renderPosition = function( x ) {\r\n  // render position of cell with in slider\r\n  var side = this.parent.originSide;\r\n  this.element.style[ side ] = this.parent.getPositionValue( x );\r\n};\r\n\r\n/**\r\n * @param {Integer} factor - 0, 1, or -1\r\n**/\r\nproto.wrapShift = function( shift ) {\r\n  this.shift = shift;\r\n  this.renderPosition( this.x + this.parent.slideableWidth * shift );\r\n};\r\n\r\nproto.remove = function() {\r\n  this.element.parentNode.removeChild( this.element );\r\n};\r\n\r\nreturn Cell;\r\n\r\n}));\r\n\r\n// slide\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/slide',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Slide = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n'use strict';\r\n\r\nfunction Slide( parent ) {\r\n  this.parent = parent;\r\n  this.isOriginLeft = parent.originSide == 'left';\r\n  this.cells = [];\r\n  this.outerWidth = 0;\r\n  this.height = 0;\r\n}\r\n\r\nvar proto = Slide.prototype;\r\n\r\nproto.addCell = function( cell ) {\r\n  this.cells.push( cell );\r\n  this.outerWidth += cell.size.outerWidth;\r\n  this.height = Math.max( cell.size.outerHeight, this.height );\r\n  // first cell stuff\r\n  if ( this.cells.length == 1 ) {\r\n    this.x = cell.x; // x comes from first cell\r\n    var beginMargin = this.isOriginLeft ? 'marginLeft' : 'marginRight';\r\n    this.firstMargin = cell.size[ beginMargin ];\r\n  }\r\n};\r\n\r\nproto.updateTarget = function() {\r\n  var endMargin = this.isOriginLeft ? 'marginRight' : 'marginLeft';\r\n  var lastCell = this.getLastCell();\r\n  var lastMargin = lastCell ? lastCell.size[ endMargin ] : 0;\r\n  var slideWidth = this.outerWidth - ( this.firstMargin + lastMargin );\r\n  this.target = this.x + this.firstMargin + slideWidth * this.parent.cellAlign;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.select = function() {\r\n  this.changeSelectedClass('add');\r\n};\r\n\r\nproto.unselect = function() {\r\n  this.changeSelectedClass('remove');\r\n};\r\n\r\nproto.changeSelectedClass = function( method ) {\r\n  this.cells.forEach( function( cell ) {\r\n    cell.element.classList[ method ]('is-selected');\r\n  });\r\n};\r\n\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\nreturn Slide;\r\n\r\n}));\r\n\r\n// animate\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/animate',[\r\n      'fizzy-ui-utils/utils'\r\n    ], function( utils ) {\r\n      return factory( window, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.animatePrototype = factory(\r\n      window,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, utils ) {\r\n\r\n\r\n\r\n// -------------------------- requestAnimationFrame -------------------------- //\r\n\r\n// get rAF, prefixed, if present\r\nvar requestAnimationFrame = window.requestAnimationFrame ||\r\n  window.webkitRequestAnimationFrame;\r\n\r\n// fallback to setTimeout\r\nvar lastTime = 0;\r\nif ( !requestAnimationFrame )  {\r\n  requestAnimationFrame = function( callback ) {\r\n    var currTime = new Date().getTime();\r\n    var timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) );\r\n    var id = setTimeout( callback, timeToCall );\r\n    lastTime = currTime + timeToCall;\r\n    return id;\r\n  };\r\n}\r\n\r\n// -------------------------- animate -------------------------- //\r\n\r\nvar proto = {};\r\n\r\nproto.startAnimation = function() {\r\n  if ( this.isAnimating ) {\r\n    return;\r\n  }\r\n\r\n  this.isAnimating = true;\r\n  this.restingFrames = 0;\r\n  this.animate();\r\n};\r\n\r\nproto.animate = function() {\r\n  this.applyDragForce();\r\n  this.applySelectedAttraction();\r\n\r\n  var previousX = this.x;\r\n\r\n  this.integratePhysics();\r\n  this.positionSlider();\r\n  this.settle( previousX );\r\n  // animate next frame\r\n  if ( this.isAnimating ) {\r\n    var _this = this;\r\n    requestAnimationFrame( function animateFrame() {\r\n      _this.animate();\r\n    });\r\n  }\r\n};\r\n\r\n\r\nvar transformProperty = ( function () {\r\n  var style = document.documentElement.style;\r\n  if ( typeof style.transform == 'string' ) {\r\n    return 'transform';\r\n  }\r\n  return 'WebkitTransform';\r\n})();\r\n\r\nproto.positionSlider = function() {\r\n  var x = this.x;\r\n  // wrap position around\r\n  if ( this.options.wrapAround && this.cells.length > 1 ) {\r\n    x = utils.modulo( x, this.slideableWidth );\r\n    x = x - this.slideableWidth;\r\n    this.shiftWrapCells( x );\r\n  }\r\n\r\n  x = x + this.cursorPosition;\r\n  // reverse if right-to-left and using transform\r\n  x = this.options.rightToLeft && transformProperty ? -x : x;\r\n  var value = this.getPositionValue( x );\r\n  // use 3D tranforms for hardware acceleration on iOS\r\n  // but use 2D when settled, for better font-rendering\r\n  this.slider.style[ transformProperty ] = this.isAnimating ?\r\n    'translate3d(' + value + ',0,0)' : 'translateX(' + value + ')';\r\n\r\n  // scroll event\r\n  var firstSlide = this.slides[0];\r\n  if ( firstSlide ) {\r\n    var positionX = -this.x - firstSlide.target;\r\n    var progress = positionX / this.slidesWidth;\r\n    this.dispatchEvent( 'scroll', null, [ progress, positionX ] );\r\n  }\r\n};\r\n\r\nproto.positionSliderAtSelected = function() {\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n  this.x = -this.selectedSlide.target;\r\n  this.positionSlider();\r\n};\r\n\r\nproto.getPositionValue = function( position ) {\r\n  if ( this.options.percentPosition ) {\r\n    // percent position, round to 2 digits, like 12.34%\r\n    return ( Math.round( ( position / this.size.innerWidth ) * 10000 ) * 0.01 )+ '%';\r\n  } else {\r\n    // pixel positioning\r\n    return Math.round( position ) + 'px';\r\n  }\r\n};\r\n\r\nproto.settle = function( previousX ) {\r\n  // keep track of frames where x hasn't moved\r\n  if ( !this.isPointerDown && Math.round( this.x * 100 ) == Math.round( previousX * 100 ) ) {\r\n    this.restingFrames++;\r\n  }\r\n  // stop animating if resting for 3 or more frames\r\n  if ( this.restingFrames > 2 ) {\r\n    this.isAnimating = false;\r\n    delete this.isFreeScrolling;\r\n    // render position with translateX when settled\r\n    this.positionSlider();\r\n    this.dispatchEvent('settle');\r\n  }\r\n};\r\n\r\nproto.shiftWrapCells = function( x ) {\r\n  // shift before cells\r\n  var beforeGap = this.cursorPosition + x;\r\n  this._shiftCells( this.beforeShiftCells, beforeGap, -1 );\r\n  // shift after cells\r\n  var afterGap = this.size.innerWidth - ( x + this.slideableWidth + this.cursorPosition );\r\n  this._shiftCells( this.afterShiftCells, afterGap, 1 );\r\n};\r\n\r\nproto._shiftCells = function( cells, gap, shift ) {\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    var cell = cells[i];\r\n    var cellShift = gap > 0 ? shift : 0;\r\n    cell.wrapShift( cellShift );\r\n    gap -= cell.size.outerWidth;\r\n  }\r\n};\r\n\r\nproto._unshiftCells = function( cells ) {\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    cells[i].wrapShift( 0 );\r\n  }\r\n};\r\n\r\n// -------------------------- physics -------------------------- //\r\n\r\nproto.integratePhysics = function() {\r\n  this.x += this.velocity;\r\n  this.velocity *= this.getFrictionFactor();\r\n};\r\n\r\nproto.applyForce = function( force ) {\r\n  this.velocity += force;\r\n};\r\n\r\nproto.getFrictionFactor = function() {\r\n  return 1 - this.options[ this.isFreeScrolling ? 'freeScrollFriction' : 'friction' ];\r\n};\r\n\r\nproto.getRestingPosition = function() {\r\n  // my thanks to Steven Wittens, who simplified this math greatly\r\n  return this.x + this.velocity / ( 1 - this.getFrictionFactor() );\r\n};\r\n\r\nproto.applyDragForce = function() {\r\n  if ( !this.isPointerDown ) {\r\n    return;\r\n  }\r\n  // change the position to drag position by applying force\r\n  var dragVelocity = this.dragX - this.x;\r\n  var dragForce = dragVelocity - this.velocity;\r\n  this.applyForce( dragForce );\r\n};\r\n\r\nproto.applySelectedAttraction = function() {\r\n  // do not attract if pointer down or no cells\r\n  if ( this.isPointerDown || this.isFreeScrolling || !this.cells.length ) {\r\n    return;\r\n  }\r\n  var distance = this.selectedSlide.target * -1 - this.x;\r\n  var force = distance * this.options.selectedAttraction;\r\n  this.applyForce( force );\r\n};\r\n\r\nreturn proto;\r\n\r\n}));\r\n\r\n// Flickity main\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/flickity',[\r\n      'ev-emitter/ev-emitter',\r\n      'get-size/get-size',\r\n      'fizzy-ui-utils/utils',\r\n      './cell',\r\n      './slide',\r\n      './animate'\r\n    ], function( EvEmitter, getSize, utils, Cell, Slide, animatePrototype ) {\r\n      return factory( window, EvEmitter, getSize, utils, Cell, Slide, animatePrototype );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter'),\r\n      require('get-size'),\r\n      require('fizzy-ui-utils'),\r\n      require('./cell'),\r\n      require('./slide'),\r\n      require('./animate')\r\n    );\r\n  } else {\r\n    // browser global\r\n    var _Flickity = window.Flickity;\r\n\r\n    window.Flickity = factory(\r\n      window,\r\n      window.EvEmitter,\r\n      window.getSize,\r\n      window.fizzyUIUtils,\r\n      _Flickity.Cell,\r\n      _Flickity.Slide,\r\n      _Flickity.animatePrototype\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter, getSize,\r\n  utils, Cell, Slide, animatePrototype ) {\r\n\r\n\r\n\r\n// vars\r\nvar jQuery = window.jQuery;\r\nvar getComputedStyle = window.getComputedStyle;\r\nvar console = window.console;\r\n\r\nfunction moveElements( elems, toElem ) {\r\n  elems = utils.makeArray( elems );\r\n  while ( elems.length ) {\r\n    toElem.appendChild( elems.shift() );\r\n  }\r\n}\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\n// globally unique identifiers\r\nvar GUID = 0;\r\n// internal store of all Flickity intances\r\nvar instances = {};\r\n\r\nfunction Flickity( element, options ) {\r\n  var queryElement = utils.getQueryElement( element );\r\n  if ( !queryElement ) {\r\n    if ( console ) {\r\n      console.error( 'Bad element for Flickity: ' + ( queryElement || element ) );\r\n    }\r\n    return;\r\n  }\r\n  this.element = queryElement;\r\n  // do not initialize twice on same element\r\n  if ( this.element.flickityGUID ) {\r\n    var instance = instances[ this.element.flickityGUID ];\r\n    instance.option( options );\r\n    return instance;\r\n  }\r\n\r\n  // add jQuery\r\n  if ( jQuery ) {\r\n    this.$element = jQuery( this.element );\r\n  }\r\n  // options\r\n  this.options = utils.extend( {}, this.constructor.defaults );\r\n  this.option( options );\r\n\r\n  // kick things off\r\n  this._create();\r\n}\r\n\r\nFlickity.defaults = {\r\n  accessibility: true,\r\n  // adaptiveHeight: false,\r\n  cellAlign: 'center',\r\n  // cellSelector: undefined,\r\n  // contain: false,\r\n  freeScrollFriction: 0.075, // friction when free-scrolling\r\n  friction: 0.28, // friction when selecting\r\n  namespaceJQueryEvents: true,\r\n  // initialIndex: 0,\r\n  percentPosition: true,\r\n  resize: true,\r\n  selectedAttraction: 0.025,\r\n  setGallerySize: true\r\n  // watchCSS: false,\r\n  // wrapAround: false\r\n};\r\n\r\n// hash of methods triggered on _create()\r\nFlickity.createMethods = [];\r\n\r\nvar proto = Flickity.prototype;\r\n// inherit EventEmitter\r\nutils.extend( proto, EvEmitter.prototype );\r\n\r\nproto._create = function() {\r\n  // add id for Flickity.data\r\n  var id = this.guid = ++GUID;\r\n  this.element.flickityGUID = id; // expando\r\n  instances[ id ] = this; // associate via id\r\n  // initial properties\r\n  this.selectedIndex = 0;\r\n  // how many frames slider has been in same position\r\n  this.restingFrames = 0;\r\n  // initial physics properties\r\n  this.x = 0;\r\n  this.velocity = 0;\r\n  this.originSide = this.options.rightToLeft ? 'right' : 'left';\r\n  // create viewport & slider\r\n  this.viewport = document.createElement('div');\r\n  this.viewport.className = 'flickity-viewport';\r\n  this._createSlider();\r\n\r\n  if ( this.options.resize || this.options.watchCSS ) {\r\n    window.addEventListener( 'resize', this );\r\n  }\r\n\r\n  Flickity.createMethods.forEach( function( method ) {\r\n    this[ method ]();\r\n  }, this );\r\n\r\n  if ( this.options.watchCSS ) {\r\n    this.watchCSS();\r\n  } else {\r\n    this.activate();\r\n  }\r\n\r\n};\r\n\r\n/**\r\n * set options\r\n * @param {Object} opts\r\n */\r\nproto.option = function( opts ) {\r\n  utils.extend( this.options, opts );\r\n};\r\n\r\nproto.activate = function() {\r\n  if ( this.isActive ) {\r\n    return;\r\n  }\r\n  this.isActive = true;\r\n  this.element.classList.add('flickity-enabled');\r\n  if ( this.options.rightToLeft ) {\r\n    this.element.classList.add('flickity-rtl');\r\n  }\r\n\r\n  this.getSize();\r\n  // move initial cell elements so they can be loaded as cells\r\n  var cellElems = this._filterFindCellElements( this.element.children );\r\n  moveElements( cellElems, this.slider );\r\n  this.viewport.appendChild( this.slider );\r\n  this.element.appendChild( this.viewport );\r\n  // get cells from children\r\n  this.reloadCells();\r\n\r\n  if ( this.options.accessibility ) {\r\n    // allow element to focusable\r\n    this.element.tabIndex = 0;\r\n    // listen for key presses\r\n    this.element.addEventListener( 'keydown', this );\r\n  }\r\n\r\n  this.emitEvent('activate');\r\n\r\n  var index;\r\n  var initialIndex = this.options.initialIndex;\r\n  if ( this.isInitActivated ) {\r\n    index = this.selectedIndex;\r\n  } else if ( initialIndex !== undefined ) {\r\n    index = this.cells[ initialIndex ] ? initialIndex : 0;\r\n  } else {\r\n    index = 0;\r\n  }\r\n  // select instantly\r\n  this.select( index, false, true );\r\n  // flag for initial activation, for using initialIndex\r\n  this.isInitActivated = true;\r\n};\r\n\r\n// slider positions the cells\r\nproto._createSlider = function() {\r\n  // slider element does all the positioning\r\n  var slider = document.createElement('div');\r\n  slider.className = 'flickity-slider';\r\n  slider.style[ this.originSide ] = 0;\r\n  this.slider = slider;\r\n};\r\n\r\nproto._filterFindCellElements = function( elems ) {\r\n  return utils.filterFindElements( elems, this.options.cellSelector );\r\n};\r\n\r\n// goes through all children\r\nproto.reloadCells = function() {\r\n  // collection of item elements\r\n  this.cells = this._makeCells( this.slider.children );\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n};\r\n\r\n/**\r\n * turn elements into Flickity.Cells\r\n * @param {Array or NodeList or HTMLElement} elems\r\n * @returns {Array} items - collection of new Flickity Cells\r\n */\r\nproto._makeCells = function( elems ) {\r\n  var cellElems = this._filterFindCellElements( elems );\r\n\r\n  // create new Flickity for collection\r\n  var cells = cellElems.map( function( cellElem ) {\r\n    return new Cell( cellElem, this );\r\n  }, this );\r\n\r\n  return cells;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.getLastSlide = function() {\r\n  return this.slides[ this.slides.length - 1 ];\r\n};\r\n\r\n// positions all cells\r\nproto.positionCells = function() {\r\n  // size all cells\r\n  this._sizeCells( this.cells );\r\n  // position all cells\r\n  this._positionCells( 0 );\r\n};\r\n\r\n/**\r\n * position certain cells\r\n * @param {Integer} index - which cell to start with\r\n */\r\nproto._positionCells = function( index ) {\r\n  index = index || 0;\r\n  // also measure maxCellHeight\r\n  // start 0 if positioning all cells\r\n  this.maxCellHeight = index ? this.maxCellHeight || 0 : 0;\r\n  var cellX = 0;\r\n  // get cellX\r\n  if ( index > 0 ) {\r\n    var startCell = this.cells[ index - 1 ];\r\n    cellX = startCell.x + startCell.size.outerWidth;\r\n  }\r\n  var len = this.cells.length;\r\n  for ( var i=index; i < len; i++ ) {\r\n    var cell = this.cells[i];\r\n    cell.setPosition( cellX );\r\n    cellX += cell.size.outerWidth;\r\n    this.maxCellHeight = Math.max( cell.size.outerHeight, this.maxCellHeight );\r\n  }\r\n  // keep track of cellX for wrap-around\r\n  this.slideableWidth = cellX;\r\n  // slides\r\n  this.updateSlides();\r\n  // contain slides target\r\n  this._containSlides();\r\n  // update slidesWidth\r\n  this.slidesWidth = len ? this.getLastSlide().target - this.slides[0].target : 0;\r\n};\r\n\r\n/**\r\n * cell.getSize() on multiple cells\r\n * @param {Array} cells\r\n */\r\nproto._sizeCells = function( cells ) {\r\n  cells.forEach( function( cell ) {\r\n    cell.getSize();\r\n  });\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nproto.updateSlides = function() {\r\n  this.slides = [];\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var slide = new Slide( this );\r\n  this.slides.push( slide );\r\n  var isOriginLeft = this.originSide == 'left';\r\n  var nextMargin = isOriginLeft ? 'marginRight' : 'marginLeft';\r\n\r\n  var canCellFit = this._getCanCellFit();\r\n\r\n  this.cells.forEach( function( cell, i ) {\r\n    // just add cell if first cell in slide\r\n    if ( !slide.cells.length ) {\r\n      slide.addCell( cell );\r\n      return;\r\n    }\r\n\r\n    var slideWidth = ( slide.outerWidth - slide.firstMargin ) +\r\n      ( cell.size.outerWidth - cell.size[ nextMargin ] );\r\n\r\n    if ( canCellFit.call( this, i, slideWidth ) ) {\r\n      slide.addCell( cell );\r\n    } else {\r\n      // doesn't fit, new slide\r\n      slide.updateTarget();\r\n\r\n      slide = new Slide( this );\r\n      this.slides.push( slide );\r\n      slide.addCell( cell );\r\n    }\r\n  }, this );\r\n  // last slide\r\n  slide.updateTarget();\r\n  // update .selectedSlide\r\n  this.updateSelectedSlide();\r\n};\r\n\r\nproto._getCanCellFit = function() {\r\n  var groupCells = this.options.groupCells;\r\n  if ( !groupCells ) {\r\n    return function() {\r\n      return false;\r\n    };\r\n  } else if ( typeof groupCells == 'number' ) {\r\n    // group by number. 3 -> [0,1,2], [3,4,5], ...\r\n    var number = parseInt( groupCells, 10 );\r\n    return function( i ) {\r\n      return ( i % number ) !== 0;\r\n    };\r\n  }\r\n  // default, group by width of slide\r\n  // parse '75%\r\n  var percentMatch = typeof groupCells == 'string' &&\r\n    groupCells.match(/^(\\d+)%$/);\r\n  var percent = percentMatch ? parseInt( percentMatch[1], 10 ) / 100 : 1;\r\n  return function( i, slideWidth ) {\r\n    return slideWidth <= ( this.size.innerWidth + 1 ) * percent;\r\n  };\r\n};\r\n\r\n// alias _init for jQuery plugin .flickity()\r\nproto._init =\r\nproto.reposition = function() {\r\n  this.positionCells();\r\n  this.positionSliderAtSelected();\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n  this.setCellAlign();\r\n  this.cursorPosition = this.size.innerWidth * this.cellAlign;\r\n};\r\n\r\nvar cellAlignShorthands = {\r\n  // cell align, then based on origin side\r\n  center: {\r\n    left: 0.5,\r\n    right: 0.5\r\n  },\r\n  left: {\r\n    left: 0,\r\n    right: 1\r\n  },\r\n  right: {\r\n    right: 0,\r\n    left: 1\r\n  }\r\n};\r\n\r\nproto.setCellAlign = function() {\r\n  var shorthand = cellAlignShorthands[ this.options.cellAlign ];\r\n  this.cellAlign = shorthand ? shorthand[ this.originSide ] : this.options.cellAlign;\r\n};\r\n\r\nproto.setGallerySize = function() {\r\n  if ( this.options.setGallerySize ) {\r\n    var height = this.options.adaptiveHeight && this.selectedSlide ?\r\n      this.selectedSlide.height : this.maxCellHeight;\r\n    this.viewport.style.height = height + 'px';\r\n  }\r\n};\r\n\r\nproto._getWrapShiftCells = function() {\r\n  // only for wrap-around\r\n  if ( !this.options.wrapAround ) {\r\n    return;\r\n  }\r\n  // unshift previous cells\r\n  this._unshiftCells( this.beforeShiftCells );\r\n  this._unshiftCells( this.afterShiftCells );\r\n  // get before cells\r\n  // initial gap\r\n  var gapX = this.cursorPosition;\r\n  var cellIndex = this.cells.length - 1;\r\n  this.beforeShiftCells = this._getGapCells( gapX, cellIndex, -1 );\r\n  // get after cells\r\n  // ending gap between last cell and end of gallery viewport\r\n  gapX = this.size.innerWidth - this.cursorPosition;\r\n  // start cloning at first cell, working forwards\r\n  this.afterShiftCells = this._getGapCells( gapX, 0, 1 );\r\n};\r\n\r\nproto._getGapCells = function( gapX, cellIndex, increment ) {\r\n  // keep adding cells until the cover the initial gap\r\n  var cells = [];\r\n  while ( gapX > 0 ) {\r\n    var cell = this.cells[ cellIndex ];\r\n    if ( !cell ) {\r\n      break;\r\n    }\r\n    cells.push( cell );\r\n    cellIndex += increment;\r\n    gapX -= cell.size.outerWidth;\r\n  }\r\n  return cells;\r\n};\r\n\r\n// ----- contain ----- //\r\n\r\n// contain cell targets so no excess sliding\r\nproto._containSlides = function() {\r\n  if ( !this.options.contain || this.options.wrapAround || !this.cells.length ) {\r\n    return;\r\n  }\r\n  var isRightToLeft = this.options.rightToLeft;\r\n  var beginMargin = isRightToLeft ? 'marginRight' : 'marginLeft';\r\n  var endMargin = isRightToLeft ? 'marginLeft' : 'marginRight';\r\n  var contentWidth = this.slideableWidth - this.getLastCell().size[ endMargin ];\r\n  // content is less than gallery size\r\n  var isContentSmaller = contentWidth < this.size.innerWidth;\r\n  // bounds\r\n  var beginBound = this.cursorPosition + this.cells[0].size[ beginMargin ];\r\n  var endBound = contentWidth - this.size.innerWidth * ( 1 - this.cellAlign );\r\n  // contain each cell target\r\n  this.slides.forEach( function( slide ) {\r\n    if ( isContentSmaller ) {\r\n      // all cells fit inside gallery\r\n      slide.target = contentWidth * this.cellAlign;\r\n    } else {\r\n      // contain to bounds\r\n      slide.target = Math.max( slide.target, beginBound );\r\n      slide.target = Math.min( slide.target, endBound );\r\n    }\r\n  }, this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n/**\r\n * emits events via eventEmitter and jQuery events\r\n * @param {String} type - name of event\r\n * @param {Event} event - original event\r\n * @param {Array} args - extra arguments\r\n */\r\nproto.dispatchEvent = function( type, event, args ) {\r\n  var emitArgs = event ? [ event ].concat( args ) : args;\r\n  this.emitEvent( type, emitArgs );\r\n\r\n  if ( jQuery && this.$element ) {\r\n    // default trigger with type if no event\r\n    type += this.options.namespaceJQueryEvents ? '.flickity' : '';\r\n    var $event = type;\r\n    if ( event ) {\r\n      // create jQuery event\r\n      var jQEvent = jQuery.Event( event );\r\n      jQEvent.type = type;\r\n      $event = jQEvent;\r\n    }\r\n    this.$element.trigger( $event, args );\r\n  }\r\n};\r\n\r\n// -------------------------- select -------------------------- //\r\n\r\n/**\r\n * @param {Integer} index - index of the slide\r\n * @param {Boolean} isWrap - will wrap-around to last/first if at the end\r\n * @param {Boolean} isInstant - will immediately set position at selected cell\r\n */\r\nproto.select = function( index, isWrap, isInstant ) {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  index = parseInt( index, 10 );\r\n  this._wrapSelect( index );\r\n\r\n  if ( this.options.wrapAround || isWrap ) {\r\n    index = utils.modulo( index, this.slides.length );\r\n  }\r\n  // bail if invalid index\r\n  if ( !this.slides[ index ] ) {\r\n    return;\r\n  }\r\n  this.selectedIndex = index;\r\n  this.updateSelectedSlide();\r\n  if ( isInstant ) {\r\n    this.positionSliderAtSelected();\r\n  } else {\r\n    this.startAnimation();\r\n  }\r\n  if ( this.options.adaptiveHeight ) {\r\n    this.setGallerySize();\r\n  }\r\n\r\n  this.dispatchEvent('select');\r\n  // old v1 event name, remove in v3\r\n  this.dispatchEvent('cellSelect');\r\n};\r\n\r\n// wraps position for wrapAround, to move to closest slide. #113\r\nproto._wrapSelect = function( index ) {\r\n  var len = this.slides.length;\r\n  var isWrapping = this.options.wrapAround && len > 1;\r\n  if ( !isWrapping ) {\r\n    return index;\r\n  }\r\n  var wrapIndex = utils.modulo( index, len );\r\n  // go to shortest\r\n  var delta = Math.abs( wrapIndex - this.selectedIndex );\r\n  var backWrapDelta = Math.abs( ( wrapIndex + len ) - this.selectedIndex );\r\n  var forewardWrapDelta = Math.abs( ( wrapIndex - len ) - this.selectedIndex );\r\n  if ( !this.isDragSelect && backWrapDelta < delta ) {\r\n    index += len;\r\n  } else if ( !this.isDragSelect && forewardWrapDelta < delta ) {\r\n    index -= len;\r\n  }\r\n  // wrap position so slider is within normal area\r\n  if ( index < 0 ) {\r\n    this.x -= this.slideableWidth;\r\n  } else if ( index >= len ) {\r\n    this.x += this.slideableWidth;\r\n  }\r\n};\r\n\r\nproto.previous = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex - 1, isWrap, isInstant );\r\n};\r\n\r\nproto.next = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex + 1, isWrap, isInstant );\r\n};\r\n\r\nproto.updateSelectedSlide = function() {\r\n  var slide = this.slides[ this.selectedIndex ];\r\n  // selectedIndex could be outside of slides, if triggered before resize()\r\n  if ( !slide ) {\r\n    return;\r\n  }\r\n  // unselect previous selected slide\r\n  this.unselectSelectedSlide();\r\n  // update new selected slide\r\n  this.selectedSlide = slide;\r\n  slide.select();\r\n  this.selectedCells = slide.cells;\r\n  this.selectedElements = slide.getCellElements();\r\n  // HACK: selectedCell & selectedElement is first cell in slide, backwards compatibility\r\n  // Remove in v3?\r\n  this.selectedCell = slide.cells[0];\r\n  this.selectedElement = this.selectedElements[0];\r\n};\r\n\r\nproto.unselectSelectedSlide = function() {\r\n  if ( this.selectedSlide ) {\r\n    this.selectedSlide.unselect();\r\n  }\r\n};\r\n\r\n/**\r\n * select slide from number or cell element\r\n * @param {Element or Number} elem\r\n */\r\nproto.selectCell = function( value, isWrap, isInstant ) {\r\n  // get cell\r\n  var cell;\r\n  if ( typeof value == 'number' ) {\r\n    cell = this.cells[ value ];\r\n  } else {\r\n    // use string as selector\r\n    if ( typeof value == 'string' ) {\r\n      value = this.element.querySelector( value );\r\n    }\r\n    // get cell from element\r\n    cell = this.getCell( value );\r\n  }\r\n  // select slide that has cell\r\n  for ( var i=0; cell && i < this.slides.length; i++ ) {\r\n    var slide = this.slides[i];\r\n    var index = slide.cells.indexOf( cell );\r\n    if ( index != -1 ) {\r\n      this.select( i, isWrap, isInstant );\r\n      return;\r\n    }\r\n  }\r\n};\r\n\r\n// -------------------------- get cells -------------------------- //\r\n\r\n/**\r\n * get Flickity.Cell, given an Element\r\n * @param {Element} elem\r\n * @returns {Flickity.Cell} item\r\n */\r\nproto.getCell = function( elem ) {\r\n  // loop through cells to get the one that matches\r\n  for ( var i=0; i < this.cells.length; i++ ) {\r\n    var cell = this.cells[i];\r\n    if ( cell.element == elem ) {\r\n      return cell;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * get collection of Flickity.Cells, given Elements\r\n * @param {Element, Array, NodeList} elems\r\n * @returns {Array} cells - Flickity.Cells\r\n */\r\nproto.getCells = function( elems ) {\r\n  elems = utils.makeArray( elems );\r\n  var cells = [];\r\n  elems.forEach( function( elem ) {\r\n    var cell = this.getCell( elem );\r\n    if ( cell ) {\r\n      cells.push( cell );\r\n    }\r\n  }, this );\r\n  return cells;\r\n};\r\n\r\n/**\r\n * get cell elements\r\n * @returns {Array} cellElems\r\n */\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\n/**\r\n * get parent cell from an element\r\n * @param {Element} elem\r\n * @returns {Flickit.Cell} cell\r\n */\r\nproto.getParentCell = function( elem ) {\r\n  // first check if elem is cell\r\n  var cell = this.getCell( elem );\r\n  if ( cell ) {\r\n    return cell;\r\n  }\r\n  // try to get parent cell elem\r\n  elem = utils.getParent( elem, '.flickity-slider > *' );\r\n  return this.getCell( elem );\r\n};\r\n\r\n/**\r\n * get cells adjacent to a slide\r\n * @param {Integer} adjCount - number of adjacent slides\r\n * @param {Integer} index - index of slide to start\r\n * @returns {Array} cells - array of Flickity.Cells\r\n */\r\nproto.getAdjacentCellElements = function( adjCount, index ) {\r\n  if ( !adjCount ) {\r\n    return this.selectedSlide.getCellElements();\r\n  }\r\n  index = index === undefined ? this.selectedIndex : index;\r\n\r\n  var len = this.slides.length;\r\n  if ( 1 + ( adjCount * 2 ) >= len ) {\r\n    return this.getCellElements();\r\n  }\r\n\r\n  var cellElems = [];\r\n  for ( var i = index - adjCount; i <= index + adjCount ; i++ ) {\r\n    var slideIndex = this.options.wrapAround ? utils.modulo( i, len ) : i;\r\n    var slide = this.slides[ slideIndex ];\r\n    if ( slide ) {\r\n      cellElems = cellElems.concat( slide.getCellElements() );\r\n    }\r\n  }\r\n  return cellElems;\r\n};\r\n\r\n// -------------------------- events -------------------------- //\r\n\r\nproto.uiChange = function() {\r\n  this.emitEvent('uiChange');\r\n};\r\n\r\nproto.childUIPointerDown = function( event ) {\r\n  this.emitEvent( 'childUIPointerDown', [ event ] );\r\n};\r\n\r\n// ----- resize ----- //\r\n\r\nproto.onresize = function() {\r\n  this.watchCSS();\r\n  this.resize();\r\n};\r\n\r\nutils.debounceMethod( Flickity, 'onresize', 150 );\r\n\r\nproto.resize = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.getSize();\r\n  // wrap values\r\n  if ( this.options.wrapAround ) {\r\n    this.x = utils.modulo( this.x, this.slideableWidth );\r\n  }\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  this.emitEvent('resize');\r\n  // update selected index for group slides, instant\r\n  // TODO: position can be lost between groups of various numbers\r\n  var selectedElement = this.selectedElements && this.selectedElements[0];\r\n  this.selectCell( selectedElement, false, true );\r\n};\r\n\r\n// watches the :after property, activates/deactivates\r\nproto.watchCSS = function() {\r\n  var watchOption = this.options.watchCSS;\r\n  if ( !watchOption ) {\r\n    return;\r\n  }\r\n\r\n  var afterContent = getComputedStyle( this.element, ':after' ).content;\r\n  // activate if :after { content: 'flickity' }\r\n  if ( afterContent.indexOf('flickity') != -1 ) {\r\n    this.activate();\r\n  } else {\r\n    this.deactivate();\r\n  }\r\n};\r\n\r\n// ----- keydown ----- //\r\n\r\n// go previous/next if left/right keys pressed\r\nproto.onkeydown = function( event ) {\r\n  // only work if element is in focus\r\n  if ( !this.options.accessibility ||\r\n    ( document.activeElement && document.activeElement != this.element ) ) {\r\n    return;\r\n  }\r\n\r\n  if ( event.keyCode == 37 ) {\r\n    // go left\r\n    var leftMethod = this.options.rightToLeft ? 'next' : 'previous';\r\n    this.uiChange();\r\n    this[ leftMethod ]();\r\n  } else if ( event.keyCode == 39 ) {\r\n    // go right\r\n    var rightMethod = this.options.rightToLeft ? 'previous' : 'next';\r\n    this.uiChange();\r\n    this[ rightMethod ]();\r\n  }\r\n};\r\n\r\n// -------------------------- destroy -------------------------- //\r\n\r\n// deactivate all Flickity functionality, but keep stuff available\r\nproto.deactivate = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.element.classList.remove('flickity-enabled');\r\n  this.element.classList.remove('flickity-rtl');\r\n  // destroy cells\r\n  this.cells.forEach( function( cell ) {\r\n    cell.destroy();\r\n  });\r\n  this.unselectSelectedSlide();\r\n  this.element.removeChild( this.viewport );\r\n  // move child elements back into element\r\n  moveElements( this.slider.children, this.element );\r\n  if ( this.options.accessibility ) {\r\n    this.element.removeAttribute('tabIndex');\r\n    this.element.removeEventListener( 'keydown', this );\r\n  }\r\n  // set flags\r\n  this.isActive = false;\r\n  this.emitEvent('deactivate');\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.deactivate();\r\n  window.removeEventListener( 'resize', this );\r\n  this.emitEvent('destroy');\r\n  if ( jQuery && this.$element ) {\r\n    jQuery.removeData( this.element, 'flickity' );\r\n  }\r\n  delete this.element.flickityGUID;\r\n  delete instances[ this.guid ];\r\n};\r\n\r\n// -------------------------- prototype -------------------------- //\r\n\r\nutils.extend( proto, animatePrototype );\r\n\r\n// -------------------------- extras -------------------------- //\r\n\r\n/**\r\n * get Flickity instance from element\r\n * @param {Element} elem\r\n * @returns {Flickity}\r\n */\r\nFlickity.data = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var id = elem && elem.flickityGUID;\r\n  return id && instances[ id ];\r\n};\r\n\r\nutils.htmlInit( Flickity, 'flickity' );\r\n\r\nif ( jQuery && jQuery.bridget ) {\r\n  jQuery.bridget( 'flickity', Flickity );\r\n}\r\n\r\n// set internal jQuery, for Webpack + jQuery v3, #478\r\nFlickity.setJQuery = function( jq ) {\r\n  jQuery = jq;\r\n};\r\n\r\nFlickity.Cell = Cell;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Unipointer v2.2.0\r\n * base class for doing one thing with pointer event\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*global define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unipointer/unipointer',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unipointer = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nfunction noop() {}\r\n\r\nfunction Unipointer() {}\r\n\r\n// inherit EvEmitter\r\nvar proto = Unipointer.prototype = Object.create( EvEmitter.prototype );\r\n\r\nproto.bindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, true );\r\n};\r\n\r\nproto.unbindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, false );\r\n};\r\n\r\n/**\r\n * works as unbinder, as you can ._bindStart( false ) to unbind\r\n * @param {Boolean} isBind - will unbind if falsey\r\n */\r\nproto._bindStartEvent = function( elem, isBind ) {\r\n  // munge isBind, default to true\r\n  isBind = isBind === undefined ? true : !!isBind;\r\n  var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\r\n\r\n  if ( window.PointerEvent ) {\r\n    // Pointer Events. Chrome 55, IE11, Edge 14\r\n    elem[ bindMethod ]( 'pointerdown', this );\r\n  } else {\r\n    // listen for both, for devices like Chrome Pixel\r\n    elem[ bindMethod ]( 'mousedown', this );\r\n    elem[ bindMethod ]( 'touchstart', this );\r\n  }\r\n};\r\n\r\n// trigger handler methods for events\r\nproto.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// returns the touch that we're keeping track of\r\nproto.getTouch = function( touches ) {\r\n  for ( var i=0; i < touches.length; i++ ) {\r\n    var touch = touches[i];\r\n    if ( touch.identifier == this.pointerIdentifier ) {\r\n      return touch;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- start event ----- //\r\n\r\nproto.onmousedown = function( event ) {\r\n  // dismiss clicks from right or middle buttons\r\n  var button = event.button;\r\n  if ( button && ( button !== 0 && button !== 1 ) ) {\r\n    return;\r\n  }\r\n  this._pointerDown( event, event );\r\n};\r\n\r\nproto.ontouchstart = function( event ) {\r\n  this._pointerDown( event, event.changedTouches[0] );\r\n};\r\n\r\nproto.onpointerdown = function( event ) {\r\n  this._pointerDown( event, event );\r\n};\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto._pointerDown = function( event, pointer ) {\r\n  // dismiss other pointers\r\n  if ( this.isPointerDown ) {\r\n    return;\r\n  }\r\n\r\n  this.isPointerDown = true;\r\n  // save pointer identifier to match up touch events\r\n  this.pointerIdentifier = pointer.pointerId !== undefined ?\r\n    // pointerId for pointer events, touch.indentifier for touch events\r\n    pointer.pointerId : pointer.identifier;\r\n\r\n  this.pointerDown( event, pointer );\r\n};\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// hash of events to be bound after start event\r\nvar postStartEvents = {\r\n  mousedown: [ 'mousemove', 'mouseup' ],\r\n  touchstart: [ 'touchmove', 'touchend', 'touchcancel' ],\r\n  pointerdown: [ 'pointermove', 'pointerup', 'pointercancel' ],\r\n};\r\n\r\nproto._bindPostStartEvents = function( event ) {\r\n  if ( !event ) {\r\n    return;\r\n  }\r\n  // get proper events to match start event\r\n  var events = postStartEvents[ event.type ];\r\n  // bind events to node\r\n  events.forEach( function( eventName ) {\r\n    window.addEventListener( eventName, this );\r\n  }, this );\r\n  // save these arguments\r\n  this._boundPointerEvents = events;\r\n};\r\n\r\nproto._unbindPostStartEvents = function() {\r\n  // check for _boundEvents, in case dragEnd triggered twice (old IE8 bug)\r\n  if ( !this._boundPointerEvents ) {\r\n    return;\r\n  }\r\n  this._boundPointerEvents.forEach( function( eventName ) {\r\n    window.removeEventListener( eventName, this );\r\n  }, this );\r\n\r\n  delete this._boundPointerEvents;\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\nproto.onmousemove = function( event ) {\r\n  this._pointerMove( event, event );\r\n};\r\n\r\nproto.onpointermove = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerMove( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchmove = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerMove( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerMove = function( event, pointer ) {\r\n  this.pointerMove( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerMove = function( event, pointer ) {\r\n  this.emitEvent( 'pointerMove', [ event, pointer ] );\r\n};\r\n\r\n// ----- end event ----- //\r\n\r\n\r\nproto.onmouseup = function( event ) {\r\n  this._pointerUp( event, event );\r\n};\r\n\r\nproto.onpointerup = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerUp( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchend = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerUp( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerUp = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerUp( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n};\r\n\r\n// ----- pointer done ----- //\r\n\r\n// triggered on pointer up & pointer cancel\r\nproto._pointerDone = function() {\r\n  // reset properties\r\n  this.isPointerDown = false;\r\n  delete this.pointerIdentifier;\r\n  // remove events\r\n  this._unbindPostStartEvents();\r\n  this.pointerDone();\r\n};\r\n\r\nproto.pointerDone = noop;\r\n\r\n// ----- pointer cancel ----- //\r\n\r\nproto.onpointercancel = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerCancel( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchcancel = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerCancel( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer cancel\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerCancel = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerCancel( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerCancel = function( event, pointer ) {\r\n  this.emitEvent( 'pointerCancel', [ event, pointer ] );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n// utility function for getting x/y coords from event\r\nUnipointer.getPointerPoint = function( pointer ) {\r\n  return {\r\n    x: pointer.pageX,\r\n    y: pointer.pageY\r\n  };\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Unipointer;\r\n\r\n}));\r\n\r\n/*!\r\n * Unidragger v2.2.3\r\n * Draggable base class\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, unused: true, undef: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unidragger/unidragger',[\r\n      'unipointer/unipointer'\r\n    ], function( Unipointer ) {\r\n      return factory( window, Unipointer );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('unipointer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unidragger = factory(\r\n      window,\r\n      window.Unipointer\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Unipointer ) {\r\n\r\n\r\n\r\n// -------------------------- Unidragger -------------------------- //\r\n\r\nfunction Unidragger() {}\r\n\r\n// inherit Unipointer & EvEmitter\r\nvar proto = Unidragger.prototype = Object.create( Unipointer.prototype );\r\n\r\n// ----- bind start ----- //\r\n\r\nproto.bindHandles = function() {\r\n  this._bindHandles( true );\r\n};\r\n\r\nproto.unbindHandles = function() {\r\n  this._bindHandles( false );\r\n};\r\n\r\n/**\r\n * works as unbinder, as you can .bindHandles( false ) to unbind\r\n * @param {Boolean} isBind - will unbind if falsey\r\n */\r\nproto._bindHandles = function( isBind ) {\r\n  // munge isBind, default to true\r\n  isBind = isBind === undefined ? true : !!isBind;\r\n  // bind each handle\r\n  var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\r\n  for ( var i=0; i < this.handles.length; i++ ) {\r\n    var handle = this.handles[i];\r\n    this._bindStartEvent( handle, isBind );\r\n    handle[ bindMethod ]( 'click', this );\r\n    // touch-action: none to override browser touch gestures\r\n    // metafizzy/flickity#540\r\n    if ( window.PointerEvent ) {\r\n      handle.style.touchAction = isBind ? this._touchActionValue : '';\r\n    }\r\n  }\r\n};\r\n\r\n// prototype so it can be overwriteable by Flickity\r\nproto._touchActionValue = 'none';\r\n\r\n// ----- start event ----- //\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerDown = function( event, pointer ) {\r\n  // dismiss range sliders\r\n  if ( event.target.nodeName == 'INPUT' && event.target.type == 'range' ) {\r\n    // reset pointerDown logic\r\n    this.isPointerDown = false;\r\n    delete this.pointerIdentifier;\r\n    return;\r\n  }\r\n\r\n  this._dragPointerDown( event, pointer );\r\n  // kludge to blur focused inputs in dragger\r\n  var focused = document.activeElement;\r\n  if ( focused && focused.blur ) {\r\n    focused.blur();\r\n  }\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// base pointer down logic\r\nproto._dragPointerDown = function( event, pointer ) {\r\n  // track to see when dragging starts\r\n  this.pointerDownPoint = Unipointer.getPointerPoint( pointer );\r\n\r\n  var canPreventDefault = this.canPreventDefaultOnPointerDown( event, pointer );\r\n  if ( canPreventDefault ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// overwriteable method so Flickity can prevent for scrolling\r\nproto.canPreventDefaultOnPointerDown = function( event ) {\r\n  // prevent default, unless touchstart or <select>\r\n  return event.target.nodeName != 'SELECT';\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\n/**\r\n * drag move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.emitEvent( 'pointerMove', [ event, pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\n// base pointer move logic\r\nproto._dragPointerMove = function( event, pointer ) {\r\n  var movePoint = Unipointer.getPointerPoint( pointer );\r\n  var moveVector = {\r\n    x: movePoint.x - this.pointerDownPoint.x,\r\n    y: movePoint.y - this.pointerDownPoint.y\r\n  };\r\n  // start drag if pointer has moved far enough to start drag\r\n  if ( !this.isDragging && this.hasDragStarted( moveVector ) ) {\r\n    this._dragStart( event, pointer );\r\n  }\r\n  return moveVector;\r\n};\r\n\r\n// condition if pointer has moved far enough to start drag\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > 3 || Math.abs( moveVector.y ) > 3;\r\n};\r\n\r\n\r\n// ----- end event ----- //\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto._dragPointerUp = function( event, pointer ) {\r\n  if ( this.isDragging ) {\r\n    this._dragEnd( event, pointer );\r\n  } else {\r\n    // pointer didn't move enough for drag to start\r\n    this._staticClick( event, pointer );\r\n  }\r\n};\r\n\r\n// -------------------------- drag -------------------------- //\r\n\r\n// dragStart\r\nproto._dragStart = function( event, pointer ) {\r\n  this.isDragging = true;\r\n  this.dragStartPoint = Unipointer.getPointerPoint( pointer );\r\n  // prevent clicks\r\n  this.isPreventingClicks = true;\r\n\r\n  this.dragStart( event, pointer );\r\n};\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  this.emitEvent( 'dragStart', [ event, pointer ] );\r\n};\r\n\r\n// dragMove\r\nproto._dragMove = function( event, pointer, moveVector ) {\r\n  // do not drag if not dragging yet\r\n  if ( !this.isDragging ) {\r\n    return;\r\n  }\r\n\r\n  this.dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  event.preventDefault();\r\n  this.emitEvent( 'dragMove', [ event, pointer, moveVector ] );\r\n};\r\n\r\n// dragEnd\r\nproto._dragEnd = function( event, pointer ) {\r\n  // set flags\r\n  this.isDragging = false;\r\n  // re-enable clicking async\r\n  setTimeout( function() {\r\n    delete this.isPreventingClicks;\r\n  }.bind( this ) );\r\n\r\n  this.dragEnd( event, pointer );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  this.emitEvent( 'dragEnd', [ event, pointer ] );\r\n};\r\n\r\n// ----- onclick ----- //\r\n\r\n// handle all clicks and prevent clicks when dragging\r\nproto.onclick = function( event ) {\r\n  if ( this.isPreventingClicks ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\n// triggered after pointer down & up with no/tiny movement\r\nproto._staticClick = function( event, pointer ) {\r\n  // ignore emulated mouse up clicks\r\n  if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\r\n    return;\r\n  }\r\n\r\n  // allow click in <input>s and <textarea>s\r\n  var nodeName = event.target.nodeName;\r\n  if ( nodeName == 'INPUT' || nodeName == 'TEXTAREA' ) {\r\n    event.target.focus();\r\n  }\r\n  this.staticClick( event, pointer );\r\n\r\n  // set flag for emulated clicks 300ms after touchend\r\n  if ( event.type != 'mouseup' ) {\r\n    this.isIgnoringMouseUp = true;\r\n    // reset flag after 300ms\r\n    setTimeout( function() {\r\n      delete this.isIgnoringMouseUp;\r\n    }.bind( this ), 400 );\r\n  }\r\n};\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  this.emitEvent( 'staticClick', [ event, pointer ] );\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nUnidragger.getPointerPoint = Unipointer.getPointerPoint;\r\n\r\n// -----  ----- //\r\n\r\nreturn Unidragger;\r\n\r\n}));\r\n\r\n// drag\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/drag',[\r\n      './flickity',\r\n      'unidragger/unidragger',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, Unidragger, utils ) {\r\n      return factory( window, Flickity, Unidragger, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('unidragger'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.Unidragger,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, Unidragger, utils ) {\r\n\r\n\r\n\r\n// ----- defaults ----- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  draggable: true,\r\n  dragThreshold: 3,\r\n});\r\n\r\n// ----- create ----- //\r\n\r\nFlickity.createMethods.push('_createDrag');\r\n\r\n// -------------------------- drag prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\nutils.extend( proto, Unidragger.prototype );\r\nproto._touchActionValue = 'pan-y';\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nvar isTouch = 'createTouch' in document;\r\nvar isTouchmoveScrollCanceled = false;\r\n\r\nproto._createDrag = function() {\r\n  this.on( 'activate', this.bindDrag );\r\n  this.on( 'uiChange', this._uiChangeDrag );\r\n  this.on( 'childUIPointerDown', this._childUIPointerDownDrag );\r\n  this.on( 'deactivate', this.unbindDrag );\r\n  // HACK - add seemingly innocuous handler to fix iOS 10 scroll behavior\r\n  // #457, RubaXa/Sortable#973\r\n  if ( isTouch && !isTouchmoveScrollCanceled ) {\r\n    window.addEventListener( 'touchmove', function() {});\r\n    isTouchmoveScrollCanceled = true;\r\n  }\r\n};\r\n\r\nproto.bindDrag = function() {\r\n  if ( !this.options.draggable || this.isDragBound ) {\r\n    return;\r\n  }\r\n  this.element.classList.add('is-draggable');\r\n  this.handles = [ this.viewport ];\r\n  this.bindHandles();\r\n  this.isDragBound = true;\r\n};\r\n\r\nproto.unbindDrag = function() {\r\n  if ( !this.isDragBound ) {\r\n    return;\r\n  }\r\n  this.element.classList.remove('is-draggable');\r\n  this.unbindHandles();\r\n  delete this.isDragBound;\r\n};\r\n\r\nproto._uiChangeDrag = function() {\r\n  delete this.isFreeScrolling;\r\n};\r\n\r\nproto._childUIPointerDownDrag = function( event ) {\r\n  event.preventDefault();\r\n  this.pointerDownFocus( event );\r\n};\r\n\r\n// -------------------------- pointer events -------------------------- //\r\n\r\n// nodes that have text fields\r\nvar cursorNodes = {\r\n  TEXTAREA: true,\r\n  INPUT: true,\r\n  OPTION: true,\r\n};\r\n\r\n// input types that do not have text fields\r\nvar clickTypes = {\r\n  radio: true,\r\n  checkbox: true,\r\n  button: true,\r\n  submit: true,\r\n  image: true,\r\n  file: true,\r\n};\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  // dismiss inputs with text fields. #403, #404\r\n  var isCursorInput = cursorNodes[ event.target.nodeName ] &&\r\n    !clickTypes[ event.target.type ];\r\n  if ( isCursorInput ) {\r\n    // reset pointerDown logic\r\n    this.isPointerDown = false;\r\n    delete this.pointerIdentifier;\r\n    return;\r\n  }\r\n\r\n  this._dragPointerDown( event, pointer );\r\n\r\n  // kludge to blur focused inputs in dragger\r\n  var focused = document.activeElement;\r\n  if ( focused && focused.blur && focused != this.element &&\r\n    // do not blur body for IE9 & 10, #117\r\n    focused != document.body ) {\r\n    focused.blur();\r\n  }\r\n  this.pointerDownFocus( event );\r\n  // stop if it was moving\r\n  this.dragX = this.x;\r\n  this.viewport.classList.add('is-pointer-down');\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  // track scrolling\r\n  this.pointerDownScroll = getScrollPosition();\r\n  window.addEventListener( 'scroll', this );\r\n\r\n  this.dispatchEvent( 'pointerDown', event, [ pointer ] );\r\n};\r\n\r\nproto.pointerDownFocus = function( event ) {\r\n  // focus element, if not touch, and its not an input or select\r\n  var canPointerDown = getCanPointerDown( event );\r\n  if ( !this.options.accessibility || canPointerDown ) {\r\n    return;\r\n  }\r\n  var prevScrollY = window.pageYOffset;\r\n  this.element.focus();\r\n  // hack to fix scroll jump after focus, #76\r\n  if ( window.pageYOffset != prevScrollY ) {\r\n    window.scrollTo( window.pageXOffset, prevScrollY );\r\n  }\r\n};\r\n\r\nvar focusNodes = {\r\n  INPUT: true,\r\n  SELECT: true,\r\n};\r\n\r\nfunction getCanPointerDown( event ) {\r\n  var isTouchStart = event.type == 'touchstart';\r\n  var isTouchPointer = event.pointerType == 'touch';\r\n  var isFocusNode = focusNodes[ event.target.nodeName ];\r\n  return isTouchStart || isTouchPointer || isFocusNode;\r\n}\r\n\r\nproto.canPreventDefaultOnPointerDown = function( event ) {\r\n  // prevent default, unless touchstart or input\r\n  var canPointerDown = getCanPointerDown( event );\r\n  return !canPointerDown;\r\n};\r\n\r\n// ----- move ----- //\r\n\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > this.options.dragThreshold;\r\n};\r\n\r\n// ----- up ----- //\r\n\r\nproto.pointerUp = function( event, pointer ) {\r\n  delete this.isTouchScrolling;\r\n  this.viewport.classList.remove('is-pointer-down');\r\n  this.dispatchEvent( 'pointerUp', event, [ pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto.pointerDone = function() {\r\n  window.removeEventListener( 'scroll', this );\r\n  delete this.pointerDownScroll;\r\n};\r\n\r\n// -------------------------- dragging -------------------------- //\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  this.dragStartPosition = this.x;\r\n  this.startAnimation();\r\n  window.removeEventListener( 'scroll', this );\r\n  this.dispatchEvent( 'dragStart', event, [ pointer ] );\r\n};\r\n\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.dispatchEvent( 'pointerMove', event, [ pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  event.preventDefault();\r\n\r\n  this.previousDragX = this.dragX;\r\n  // reverse if right-to-left\r\n  var direction = this.options.rightToLeft ? -1 : 1;\r\n  var dragX = this.dragStartPosition + moveVector.x * direction;\r\n\r\n  if ( !this.options.wrapAround && this.slides.length ) {\r\n    // slow drag\r\n    var originBound = Math.max( -this.slides[0].target, this.dragStartPosition );\r\n    dragX = dragX > originBound ? ( dragX + originBound ) * 0.5 : dragX;\r\n    var endBound = Math.min( -this.getLastSlide().target, this.dragStartPosition );\r\n    dragX = dragX < endBound ? ( dragX + endBound ) * 0.5 : dragX;\r\n  }\r\n\r\n  this.dragX = dragX;\r\n\r\n  this.dragMoveTime = new Date();\r\n  this.dispatchEvent( 'dragMove', event, [ pointer, moveVector ] );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  if ( this.options.freeScroll ) {\r\n    this.isFreeScrolling = true;\r\n  }\r\n  // set selectedIndex based on where flick will end up\r\n  var index = this.dragEndRestingSelect();\r\n\r\n  if ( this.options.freeScroll && !this.options.wrapAround ) {\r\n    // if free-scroll & not wrap around\r\n    // do not free-scroll if going outside of bounding slides\r\n    // so bounding slides can attract slider, and keep it in bounds\r\n    var restingX = this.getRestingPosition();\r\n    this.isFreeScrolling = -restingX > this.slides[0].target &&\r\n      -restingX < this.getLastSlide().target;\r\n  } else if ( !this.options.freeScroll && index == this.selectedIndex ) {\r\n    // boost selection if selected index has not changed\r\n    index += this.dragEndBoostSelect();\r\n  }\r\n  delete this.previousDragX;\r\n  // apply selection\r\n  // TODO refactor this, selecting here feels weird\r\n  // HACK, set flag so dragging stays in correct direction\r\n  this.isDragSelect = this.options.wrapAround;\r\n  this.select( index );\r\n  delete this.isDragSelect;\r\n  this.dispatchEvent( 'dragEnd', event, [ pointer ] );\r\n};\r\n\r\nproto.dragEndRestingSelect = function() {\r\n  var restingX = this.getRestingPosition();\r\n  // how far away from selected slide\r\n  var distance = Math.abs( this.getSlideDistance( -restingX, this.selectedIndex ) );\r\n  // get closet resting going up and going down\r\n  var positiveResting = this._getClosestResting( restingX, distance, 1 );\r\n  var negativeResting = this._getClosestResting( restingX, distance, -1 );\r\n  // use closer resting for wrap-around\r\n  var index = positiveResting.distance < negativeResting.distance ?\r\n    positiveResting.index : negativeResting.index;\r\n  return index;\r\n};\r\n\r\n/**\r\n * given resting X and distance to selected cell\r\n * get the distance and index of the closest cell\r\n * @param {Number} restingX - estimated post-flick resting position\r\n * @param {Number} distance - distance to selected cell\r\n * @param {Integer} increment - +1 or -1, going up or down\r\n * @returns {Object} - { distance: {Number}, index: {Integer} }\r\n */\r\nproto._getClosestResting = function( restingX, distance, increment ) {\r\n  var index = this.selectedIndex;\r\n  var minDistance = Infinity;\r\n  var condition = this.options.contain && !this.options.wrapAround ?\r\n    // if contain, keep going if distance is equal to minDistance\r\n    function( d, md ) { return d <= md; } : function( d, md ) { return d < md; };\r\n  while ( condition( distance, minDistance ) ) {\r\n    // measure distance to next cell\r\n    index += increment;\r\n    minDistance = distance;\r\n    distance = this.getSlideDistance( -restingX, index );\r\n    if ( distance === null ) {\r\n      break;\r\n    }\r\n    distance = Math.abs( distance );\r\n  }\r\n  return {\r\n    distance: minDistance,\r\n    // selected was previous index\r\n    index: index - increment\r\n  };\r\n};\r\n\r\n/**\r\n * measure distance between x and a slide target\r\n * @param {Number} x\r\n * @param {Integer} index - slide index\r\n */\r\nproto.getSlideDistance = function( x, index ) {\r\n  var len = this.slides.length;\r\n  // wrap around if at least 2 slides\r\n  var isWrapAround = this.options.wrapAround && len > 1;\r\n  var slideIndex = isWrapAround ? utils.modulo( index, len ) : index;\r\n  var slide = this.slides[ slideIndex ];\r\n  if ( !slide ) {\r\n    return null;\r\n  }\r\n  // add distance for wrap-around slides\r\n  var wrap = isWrapAround ? this.slideableWidth * Math.floor( index / len ) : 0;\r\n  return x - ( slide.target + wrap );\r\n};\r\n\r\nproto.dragEndBoostSelect = function() {\r\n  // do not boost if no previousDragX or dragMoveTime\r\n  if ( this.previousDragX === undefined || !this.dragMoveTime ||\r\n    // or if drag was held for 100 ms\r\n    new Date() - this.dragMoveTime > 100 ) {\r\n    return 0;\r\n  }\r\n\r\n  var distance = this.getSlideDistance( -this.dragX, this.selectedIndex );\r\n  var delta = this.previousDragX - this.dragX;\r\n  if ( distance > 0 && delta > 0 ) {\r\n    // boost to next if moving towards the right, and positive velocity\r\n    return 1;\r\n  } else if ( distance < 0 && delta < 0 ) {\r\n    // boost to previous if moving towards the left, and negative velocity\r\n    return -1;\r\n  }\r\n  return 0;\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  // get clickedCell, if cell was clicked\r\n  var clickedCell = this.getParentCell( event.target );\r\n  var cellElem = clickedCell && clickedCell.element;\r\n  var cellIndex = clickedCell && this.cells.indexOf( clickedCell );\r\n  this.dispatchEvent( 'staticClick', event, [ pointer, cellElem, cellIndex ] );\r\n};\r\n\r\n// ----- scroll ----- //\r\n\r\nproto.onscroll = function() {\r\n  var scroll = getScrollPosition();\r\n  var scrollMoveX = this.pointerDownScroll.x - scroll.x;\r\n  var scrollMoveY = this.pointerDownScroll.y - scroll.y;\r\n  // cancel click/tap if scroll is too much\r\n  if ( Math.abs( scrollMoveX ) > 3 || Math.abs( scrollMoveY ) > 3 ) {\r\n    this._pointerDone();\r\n  }\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nfunction getScrollPosition() {\r\n  return {\r\n    x: window.pageXOffset,\r\n    y: window.pageYOffset\r\n  };\r\n}\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Tap listener v2.0.0\r\n * listens to taps\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, unused: true, undef: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false*/ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'tap-listener/tap-listener',[\r\n      'unipointer/unipointer'\r\n    ], function( Unipointer ) {\r\n      return factory( window, Unipointer );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('unipointer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.TapListener = factory(\r\n      window,\r\n      window.Unipointer\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Unipointer ) {\r\n\r\n\r\n\r\n// --------------------------  TapListener -------------------------- //\r\n\r\nfunction TapListener( elem ) {\r\n  this.bindTap( elem );\r\n}\r\n\r\n// inherit Unipointer & EventEmitter\r\nvar proto = TapListener.prototype = Object.create( Unipointer.prototype );\r\n\r\n/**\r\n * bind tap event to element\r\n * @param {Element} elem\r\n */\r\nproto.bindTap = function( elem ) {\r\n  if ( !elem ) {\r\n    return;\r\n  }\r\n  this.unbindTap();\r\n  this.tapElement = elem;\r\n  this._bindStartEvent( elem, true );\r\n};\r\n\r\nproto.unbindTap = function() {\r\n  if ( !this.tapElement ) {\r\n    return;\r\n  }\r\n  this._bindStartEvent( this.tapElement, true );\r\n  delete this.tapElement;\r\n};\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerUp = function( event, pointer ) {\r\n  // ignore emulated mouse up clicks\r\n  if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\r\n    return;\r\n  }\r\n\r\n  var pointerPoint = Unipointer.getPointerPoint( pointer );\r\n  var boundingRect = this.tapElement.getBoundingClientRect();\r\n  var scrollX = window.pageXOffset;\r\n  var scrollY = window.pageYOffset;\r\n  // calculate if pointer is inside tapElement\r\n  var isInside = pointerPoint.x >= boundingRect.left + scrollX &&\r\n    pointerPoint.x <= boundingRect.right + scrollX &&\r\n    pointerPoint.y >= boundingRect.top + scrollY &&\r\n    pointerPoint.y <= boundingRect.bottom + scrollY;\r\n  // trigger callback if pointer is inside element\r\n  if ( isInside ) {\r\n    this.emitEvent( 'tap', [ event, pointer ] );\r\n  }\r\n\r\n  // set flag for emulated clicks 300ms after touchend\r\n  if ( event.type != 'mouseup' ) {\r\n    this.isIgnoringMouseUp = true;\r\n    // reset flag after 300ms\r\n    var _this = this;\r\n    setTimeout( function() {\r\n      delete _this.isIgnoringMouseUp;\r\n    }, 400 );\r\n  }\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.pointerDone();\r\n  this.unbindTap();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn TapListener;\r\n\r\n}));\r\n\r\n// prev/next buttons\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/prev-next-button',[\r\n      './flickity',\r\n      'tap-listener/tap-listener',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, TapListener, utils ) {\r\n      return factory( window, Flickity, TapListener, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('tap-listener'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.TapListener,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, TapListener, utils ) {\r\n'use strict';\r\n\r\nvar svgURI = 'http://www.w3.org/2000/svg';\r\n\r\n// -------------------------- PrevNextButton -------------------------- //\r\n\r\nfunction PrevNextButton( direction, parent ) {\r\n  this.direction = direction;\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPrevNextButton.prototype = new TapListener();\r\n\r\nPrevNextButton.prototype._create = function() {\r\n  // properties\r\n  this.isEnabled = true;\r\n  this.isPrevious = this.direction == -1;\r\n  var leftDirection = this.parent.options.rightToLeft ? 1 : -1;\r\n  this.isLeft = this.direction == leftDirection;\r\n\r\n  var element = this.element = document.createElement('button');\r\n  element.className = 'flickity-prev-next-button';\r\n  element.className += this.isPrevious ? ' previous' : ' next';\r\n  // prevent button from submitting form http://stackoverflow.com/a/10836076/182183\r\n  element.setAttribute( 'type', 'button' );\r\n  // init as disabled\r\n  this.disable();\r\n\r\n  element.setAttribute( 'aria-label', this.isPrevious ? 'previous' : 'next' );\r\n\r\n  // create arrow\r\n  var svg = this.createSVG();\r\n  element.appendChild( svg );\r\n  // events\r\n  this.on( 'tap', this.onTap );\r\n  this.parent.on( 'select', this.update.bind( this ) );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPrevNextButton.prototype.activate = function() {\r\n  this.bindTap( this.element );\r\n  // click events from keyboard\r\n  this.element.addEventListener( 'click', this );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.element );\r\n};\r\n\r\nPrevNextButton.prototype.deactivate = function() {\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.element );\r\n  // do regular TapListener destroy\r\n  TapListener.prototype.destroy.call( this );\r\n  // click events from keyboard\r\n  this.element.removeEventListener( 'click', this );\r\n};\r\n\r\nPrevNextButton.prototype.createSVG = function() {\r\n  var svg = document.createElementNS( svgURI, 'svg');\r\n  svg.setAttribute( 'viewBox', '0 0 100 100' );\r\n  var path = document.createElementNS( svgURI, 'path');\r\n  var pathMovements = getArrowMovements( this.parent.options.arrowShape );\r\n  path.setAttribute( 'd', pathMovements );\r\n  path.setAttribute( 'class', 'arrow' );\r\n  // rotate arrow\r\n  if ( !this.isLeft ) {\r\n    path.setAttribute( 'transform', 'translate(100, 100) rotate(180) ' );\r\n  }\r\n  svg.appendChild( path );\r\n  return svg;\r\n};\r\n\r\n// get SVG path movmement\r\nfunction getArrowMovements( shape ) {\r\n  // use shape as movement if string\r\n  if ( typeof shape == 'string' ) {\r\n    return shape;\r\n  }\r\n  // create movement string\r\n  return 'M ' + shape.x0 + ',50' +\r\n    ' L ' + shape.x1 + ',' + ( shape.y1 + 50 ) +\r\n    ' L ' + shape.x2 + ',' + ( shape.y2 + 50 ) +\r\n    ' L ' + shape.x3 + ',50 ' +\r\n    ' L ' + shape.x2 + ',' + ( 50 - shape.y2 ) +\r\n    ' L ' + shape.x1 + ',' + ( 50 - shape.y1 ) +\r\n    ' Z';\r\n}\r\n\r\nPrevNextButton.prototype.onTap = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.parent.uiChange();\r\n  var method = this.isPrevious ? 'previous' : 'next';\r\n  this.parent[ method ]();\r\n};\r\n\r\nPrevNextButton.prototype.handleEvent = utils.handleEvent;\r\n\r\nPrevNextButton.prototype.onclick = function() {\r\n  // only allow clicks from keyboard\r\n  var focused = document.activeElement;\r\n  if ( focused && focused == this.element ) {\r\n    this.onTap();\r\n  }\r\n};\r\n\r\n// -----  ----- //\r\n\r\nPrevNextButton.prototype.enable = function() {\r\n  if ( this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = false;\r\n  this.isEnabled = true;\r\n};\r\n\r\nPrevNextButton.prototype.disable = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = true;\r\n  this.isEnabled = false;\r\n};\r\n\r\nPrevNextButton.prototype.update = function() {\r\n  // index of first or last slide, if previous or next\r\n  var slides = this.parent.slides;\r\n  // enable is wrapAround and at least 2 slides\r\n  if ( this.parent.options.wrapAround && slides.length > 1 ) {\r\n    this.enable();\r\n    return;\r\n  }\r\n  var lastIndex = slides.length ? slides.length - 1 : 0;\r\n  var boundIndex = this.isPrevious ? 0 : lastIndex;\r\n  var method = this.parent.selectedIndex == boundIndex ? 'disable' : 'enable';\r\n  this[ method ]();\r\n};\r\n\r\nPrevNextButton.prototype.destroy = function() {\r\n  this.deactivate();\r\n};\r\n\r\n// -------------------------- Flickity prototype -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  prevNextButtons: true,\r\n  arrowShape: {\r\n    x0: 10,\r\n    x1: 60, y1: 50,\r\n    x2: 70, y2: 40,\r\n    x3: 30\r\n  }\r\n});\r\n\r\nFlickity.createMethods.push('_createPrevNextButtons');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPrevNextButtons = function() {\r\n  if ( !this.options.prevNextButtons ) {\r\n    return;\r\n  }\r\n\r\n  this.prevButton = new PrevNextButton( -1, this );\r\n  this.nextButton = new PrevNextButton( 1, this );\r\n\r\n  this.on( 'activate', this.activatePrevNextButtons );\r\n};\r\n\r\nproto.activatePrevNextButtons = function() {\r\n  this.prevButton.activate();\r\n  this.nextButton.activate();\r\n  this.on( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\nproto.deactivatePrevNextButtons = function() {\r\n  this.prevButton.deactivate();\r\n  this.nextButton.deactivate();\r\n  this.off( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nFlickity.PrevNextButton = PrevNextButton;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// page dots\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/page-dots',[\r\n      './flickity',\r\n      'tap-listener/tap-listener',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, TapListener, utils ) {\r\n      return factory( window, Flickity, TapListener, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('tap-listener'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.TapListener,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, TapListener, utils ) {\r\n\r\n// -------------------------- PageDots -------------------------- //\r\n\r\n\r\n\r\nfunction PageDots( parent ) {\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPageDots.prototype = new TapListener();\r\n\r\nPageDots.prototype._create = function() {\r\n  // create holder element\r\n  this.holder = document.createElement('ol');\r\n  this.holder.className = 'flickity-page-dots';\r\n  // create dots, array of elements\r\n  this.dots = [];\r\n  // events\r\n  this.on( 'tap', this.onTap );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPageDots.prototype.activate = function() {\r\n  this.setDots();\r\n  this.bindTap( this.holder );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.holder );\r\n};\r\n\r\nPageDots.prototype.deactivate = function() {\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.holder );\r\n  TapListener.prototype.destroy.call( this );\r\n};\r\n\r\nPageDots.prototype.setDots = function() {\r\n  // get difference between number of slides and number of dots\r\n  var delta = this.parent.slides.length - this.dots.length;\r\n  if ( delta > 0 ) {\r\n    this.addDots( delta );\r\n  } else if ( delta < 0 ) {\r\n    this.removeDots( -delta );\r\n  }\r\n};\r\n\r\nPageDots.prototype.addDots = function( count ) {\r\n  var fragment = document.createDocumentFragment();\r\n  var newDots = [];\r\n  while ( count ) {\r\n    var dot = document.createElement('li');\r\n    dot.className = 'dot';\r\n    fragment.appendChild( dot );\r\n    newDots.push( dot );\r\n    count--;\r\n  }\r\n  this.holder.appendChild( fragment );\r\n  this.dots = this.dots.concat( newDots );\r\n};\r\n\r\nPageDots.prototype.removeDots = function( count ) {\r\n  // remove from this.dots collection\r\n  var removeDots = this.dots.splice( this.dots.length - count, count );\r\n  // remove from DOM\r\n  removeDots.forEach( function( dot ) {\r\n    this.holder.removeChild( dot );\r\n  }, this );\r\n};\r\n\r\nPageDots.prototype.updateSelected = function() {\r\n  // remove selected class on previous\r\n  if ( this.selectedDot ) {\r\n    this.selectedDot.className = 'dot';\r\n  }\r\n  // don't proceed if no dots\r\n  if ( !this.dots.length ) {\r\n    return;\r\n  }\r\n  this.selectedDot = this.dots[ this.parent.selectedIndex ];\r\n  this.selectedDot.className = 'dot is-selected';\r\n};\r\n\r\nPageDots.prototype.onTap = function( event ) {\r\n  var target = event.target;\r\n  // only care about dot clicks\r\n  if ( target.nodeName != 'LI' ) {\r\n    return;\r\n  }\r\n\r\n  this.parent.uiChange();\r\n  var index = this.dots.indexOf( target );\r\n  this.parent.select( index );\r\n};\r\n\r\nPageDots.prototype.destroy = function() {\r\n  this.deactivate();\r\n};\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pageDots: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPageDots');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPageDots = function() {\r\n  if ( !this.options.pageDots ) {\r\n    return;\r\n  }\r\n  this.pageDots = new PageDots( this );\r\n  // events\r\n  this.on( 'activate', this.activatePageDots );\r\n  this.on( 'select', this.updateSelectedPageDots );\r\n  this.on( 'cellChange', this.updatePageDots );\r\n  this.on( 'resize', this.updatePageDots );\r\n  this.on( 'deactivate', this.deactivatePageDots );\r\n};\r\n\r\nproto.activatePageDots = function() {\r\n  this.pageDots.activate();\r\n};\r\n\r\nproto.updateSelectedPageDots = function() {\r\n  this.pageDots.updateSelected();\r\n};\r\n\r\nproto.updatePageDots = function() {\r\n  this.pageDots.setDots();\r\n};\r\n\r\nproto.deactivatePageDots = function() {\r\n  this.pageDots.deactivate();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// player & autoPlay\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/player',[\r\n      'ev-emitter/ev-emitter',\r\n      'fizzy-ui-utils/utils',\r\n      './flickity'\r\n    ], function( EvEmitter, utils, Flickity ) {\r\n      return factory( EvEmitter, utils, Flickity );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('ev-emitter'),\r\n      require('fizzy-ui-utils'),\r\n      require('./flickity')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window.EvEmitter,\r\n      window.fizzyUIUtils,\r\n      window.Flickity\r\n    );\r\n  }\r\n\r\n}( window, function factory( EvEmitter, utils, Flickity ) {\r\n\r\n\r\n\r\n// -------------------------- Page Visibility -------------------------- //\r\n// https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\r\n\r\nvar hiddenProperty, visibilityEvent;\r\nif ( 'hidden' in document ) {\r\n  hiddenProperty = 'hidden';\r\n  visibilityEvent = 'visibilitychange';\r\n} else if ( 'webkitHidden' in document ) {\r\n  hiddenProperty = 'webkitHidden';\r\n  visibilityEvent = 'webkitvisibilitychange';\r\n}\r\n\r\n// -------------------------- Player -------------------------- //\r\n\r\nfunction Player( parent ) {\r\n  this.parent = parent;\r\n  this.state = 'stopped';\r\n  // visibility change event handler\r\n  if ( visibilityEvent ) {\r\n    this.onVisibilityChange = function() {\r\n      this.visibilityChange();\r\n    }.bind( this );\r\n    this.onVisibilityPlay = function() {\r\n      this.visibilityPlay();\r\n    }.bind( this );\r\n  }\r\n}\r\n\r\nPlayer.prototype = Object.create( EvEmitter.prototype );\r\n\r\n// start play\r\nPlayer.prototype.play = function() {\r\n  if ( this.state == 'playing' ) {\r\n    return;\r\n  }\r\n  // do not play if page is hidden, start playing when page is visible\r\n  var isPageHidden = document[ hiddenProperty ];\r\n  if ( visibilityEvent && isPageHidden ) {\r\n    document.addEventListener( visibilityEvent, this.onVisibilityPlay );\r\n    return;\r\n  }\r\n\r\n  this.state = 'playing';\r\n  // listen to visibility change\r\n  if ( visibilityEvent ) {\r\n    document.addEventListener( visibilityEvent, this.onVisibilityChange );\r\n  }\r\n  // start ticking\r\n  this.tick();\r\n};\r\n\r\nPlayer.prototype.tick = function() {\r\n  // do not tick if not playing\r\n  if ( this.state != 'playing' ) {\r\n    return;\r\n  }\r\n\r\n  var time = this.parent.options.autoPlay;\r\n  // default to 3 seconds\r\n  time = typeof time == 'number' ? time : 3000;\r\n  var _this = this;\r\n  // HACK: reset ticks if stopped and started within interval\r\n  this.clear();\r\n  this.timeout = setTimeout( function() {\r\n    _this.parent.next( true );\r\n    _this.tick();\r\n  }, time );\r\n};\r\n\r\nPlayer.prototype.stop = function() {\r\n  this.state = 'stopped';\r\n  this.clear();\r\n  // remove visibility change event\r\n  if ( visibilityEvent ) {\r\n    document.removeEventListener( visibilityEvent, this.onVisibilityChange );\r\n  }\r\n};\r\n\r\nPlayer.prototype.clear = function() {\r\n  clearTimeout( this.timeout );\r\n};\r\n\r\nPlayer.prototype.pause = function() {\r\n  if ( this.state == 'playing' ) {\r\n    this.state = 'paused';\r\n    this.clear();\r\n  }\r\n};\r\n\r\nPlayer.prototype.unpause = function() {\r\n  // re-start play if paused\r\n  if ( this.state == 'paused' ) {\r\n    this.play();\r\n  }\r\n};\r\n\r\n// pause if page visibility is hidden, unpause if visible\r\nPlayer.prototype.visibilityChange = function() {\r\n  var isPageHidden = document[ hiddenProperty ];\r\n  this[ isPageHidden ? 'pause' : 'unpause' ]();\r\n};\r\n\r\nPlayer.prototype.visibilityPlay = function() {\r\n  this.play();\r\n  document.removeEventListener( visibilityEvent, this.onVisibilityPlay );\r\n};\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pauseAutoPlayOnHover: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPlayer');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPlayer = function() {\r\n  this.player = new Player( this );\r\n\r\n  this.on( 'activate', this.activatePlayer );\r\n  this.on( 'uiChange', this.stopPlayer );\r\n  this.on( 'pointerDown', this.stopPlayer );\r\n  this.on( 'deactivate', this.deactivatePlayer );\r\n};\r\n\r\nproto.activatePlayer = function() {\r\n  if ( !this.options.autoPlay ) {\r\n    return;\r\n  }\r\n  this.player.play();\r\n  this.element.addEventListener( 'mouseenter', this );\r\n};\r\n\r\n// Player API, don't hate the ... thanks I know where the door is\r\n\r\nproto.playPlayer = function() {\r\n  this.player.play();\r\n};\r\n\r\nproto.stopPlayer = function() {\r\n  this.player.stop();\r\n};\r\n\r\nproto.pausePlayer = function() {\r\n  this.player.pause();\r\n};\r\n\r\nproto.unpausePlayer = function() {\r\n  this.player.unpause();\r\n};\r\n\r\nproto.deactivatePlayer = function() {\r\n  this.player.stop();\r\n  this.element.removeEventListener( 'mouseenter', this );\r\n};\r\n\r\n// ----- mouseenter/leave ----- //\r\n\r\n// pause auto-play on hover\r\nproto.onmouseenter = function() {\r\n  if ( !this.options.pauseAutoPlayOnHover ) {\r\n    return;\r\n  }\r\n  this.player.pause();\r\n  this.element.addEventListener( 'mouseleave', this );\r\n};\r\n\r\n// resume auto-play on hover off\r\nproto.onmouseleave = function() {\r\n  this.player.unpause();\r\n  this.element.removeEventListener( 'mouseleave', this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.Player = Player;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// add, remove cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/add-remove-cell',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n\r\n\r\n\r\n// append cells to a document fragment\r\nfunction getCellsFragment( cells ) {\r\n  var fragment = document.createDocumentFragment();\r\n  cells.forEach( function( cell ) {\r\n    fragment.appendChild( cell.element );\r\n  });\r\n  return fragment;\r\n}\r\n\r\n// -------------------------- add/remove cell prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\n\r\n/**\r\n * Insert, prepend, or append cells\r\n * @param {Element, Array, NodeList} elems\r\n * @param {Integer} index\r\n */\r\nproto.insert = function( elems, index ) {\r\n  var cells = this._makeCells( elems );\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  var len = this.cells.length;\r\n  // default to append\r\n  index = index === undefined ? len : index;\r\n  // add cells with document fragment\r\n  var fragment = getCellsFragment( cells );\r\n  // append to slider\r\n  var isAppend = index == len;\r\n  if ( isAppend ) {\r\n    this.slider.appendChild( fragment );\r\n  } else {\r\n    var insertCellElement = this.cells[ index ].element;\r\n    this.slider.insertBefore( fragment, insertCellElement );\r\n  }\r\n  // add to this.cells\r\n  if ( index === 0 ) {\r\n    // prepend, add to start\r\n    this.cells = cells.concat( this.cells );\r\n  } else if ( isAppend ) {\r\n    // append, add to end\r\n    this.cells = this.cells.concat( cells );\r\n  } else {\r\n    // insert in this.cells\r\n    var endCells = this.cells.splice( index, len - index );\r\n    this.cells = this.cells.concat( cells ).concat( endCells );\r\n  }\r\n\r\n  this._sizeCells( cells );\r\n\r\n  var selectedIndexDelta = index > this.selectedIndex ? 0 : cells.length;\r\n  this._cellAddedRemoved( index, selectedIndexDelta );\r\n};\r\n\r\nproto.append = function( elems ) {\r\n  this.insert( elems, this.cells.length );\r\n};\r\n\r\nproto.prepend = function( elems ) {\r\n  this.insert( elems, 0 );\r\n};\r\n\r\n/**\r\n * Remove cells\r\n * @param {Element, Array, NodeList} elems\r\n */\r\nproto.remove = function( elems ) {\r\n  var cells = this.getCells( elems );\r\n  var selectedIndexDelta = 0;\r\n  var len = cells.length;\r\n  var i, cell;\r\n  // calculate selectedIndexDelta, easier if done in seperate loop\r\n  for ( i=0; i < len; i++ ) {\r\n    cell = cells[i];\r\n    var wasBefore = this.cells.indexOf( cell ) < this.selectedIndex;\r\n    selectedIndexDelta -= wasBefore ? 1 : 0;\r\n  }\r\n\r\n  for ( i=0; i < len; i++ ) {\r\n    cell = cells[i];\r\n    cell.remove();\r\n    // remove item from collection\r\n    utils.removeFrom( this.cells, cell );\r\n  }\r\n\r\n  if ( cells.length ) {\r\n    // update stuff\r\n    this._cellAddedRemoved( 0, selectedIndexDelta );\r\n  }\r\n};\r\n\r\n// updates when cells are added or removed\r\nproto._cellAddedRemoved = function( changedCellIndex, selectedIndexDelta ) {\r\n  // TODO this math isn't perfect with grouped slides\r\n  selectedIndexDelta = selectedIndexDelta || 0;\r\n  this.selectedIndex += selectedIndexDelta;\r\n  this.selectedIndex = Math.max( 0, Math.min( this.slides.length - 1, this.selectedIndex ) );\r\n\r\n  this.cellChange( changedCellIndex, true );\r\n  // backwards compatibility\r\n  this.emitEvent( 'cellAddedRemoved', [ changedCellIndex, selectedIndexDelta ] );\r\n};\r\n\r\n/**\r\n * logic to be run after a cell's size changes\r\n * @param {Element} elem - cell's element\r\n */\r\nproto.cellSizeChange = function( elem ) {\r\n  var cell = this.getCell( elem );\r\n  if ( !cell ) {\r\n    return;\r\n  }\r\n  cell.getSize();\r\n\r\n  var index = this.cells.indexOf( cell );\r\n  this.cellChange( index );\r\n};\r\n\r\n/**\r\n * logic any time a cell is changed: added, removed, or size changed\r\n * @param {Integer} changedCellIndex - index of the changed cell, optional\r\n */\r\nproto.cellChange = function( changedCellIndex, isPositioningSlider ) {\r\n  var prevSlideableWidth = this.slideableWidth;\r\n  this._positionCells( changedCellIndex );\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  this.emitEvent( 'cellChange', [ changedCellIndex ] );\r\n  // position slider\r\n  if ( this.options.freeScroll ) {\r\n    // shift x by change in slideableWidth\r\n    // TODO fix position shifts when prepending w/ freeScroll\r\n    var deltaX = prevSlideableWidth - this.slideableWidth;\r\n    this.x += deltaX * this.cellAlign;\r\n    this.positionSlider();\r\n  } else {\r\n    // do not position slider after lazy load\r\n    if ( isPositioningSlider ) {\r\n      this.positionSliderAtSelected();\r\n    }\r\n    this.select( this.selectedIndex );\r\n  }\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// lazyload\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/lazyload',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createLazyload');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createLazyload = function() {\r\n  this.on( 'select', this.lazyLoad );\r\n};\r\n\r\nproto.lazyLoad = function() {\r\n  var lazyLoad = this.options.lazyLoad;\r\n  if ( !lazyLoad ) {\r\n    return;\r\n  }\r\n  // get adjacent cells, use lazyLoad option for adjacent count\r\n  var adjCount = typeof lazyLoad == 'number' ? lazyLoad : 0;\r\n  var cellElems = this.getAdjacentCellElements( adjCount );\r\n  // get lazy images in those cells\r\n  var lazyImages = [];\r\n  cellElems.forEach( function( cellElem ) {\r\n    var lazyCellImages = getCellLazyImages( cellElem );\r\n    lazyImages = lazyImages.concat( lazyCellImages );\r\n  });\r\n  // load lazy images\r\n  lazyImages.forEach( function( img ) {\r\n    new LazyLoader( img, this );\r\n  }, this );\r\n};\r\n\r\nfunction getCellLazyImages( cellElem ) {\r\n  // check if cell element is lazy image\r\n  if ( cellElem.nodeName == 'IMG' &&\r\n    cellElem.getAttribute('data-flickity-lazyload') ) {\r\n    return [ cellElem ];\r\n  }\r\n  // select lazy images in cell\r\n  var imgs = cellElem.querySelectorAll('img[data-flickity-lazyload]');\r\n  return utils.makeArray( imgs );\r\n}\r\n\r\n// -------------------------- LazyLoader -------------------------- //\r\n\r\n/**\r\n * class to handle loading images\r\n */\r\nfunction LazyLoader( img, flickity ) {\r\n  this.img = img;\r\n  this.flickity = flickity;\r\n  this.load();\r\n}\r\n\r\nLazyLoader.prototype.handleEvent = utils.handleEvent;\r\n\r\nLazyLoader.prototype.load = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  // load image\r\n  this.img.src = this.img.getAttribute('data-flickity-lazyload');\r\n  // remove attr\r\n  this.img.removeAttribute('data-flickity-lazyload');\r\n};\r\n\r\nLazyLoader.prototype.onload = function( event ) {\r\n  this.complete( event, 'flickity-lazyloaded' );\r\n};\r\n\r\nLazyLoader.prototype.onerror = function( event ) {\r\n  this.complete( event, 'flickity-lazyerror' );\r\n};\r\n\r\nLazyLoader.prototype.complete = function( event, className ) {\r\n  // unbind events\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n\r\n  var cell = this.flickity.getParentCell( this.img );\r\n  var cellElem = cell && cell.element;\r\n  this.flickity.cellSizeChange( cellElem );\r\n\r\n  this.img.classList.add( className );\r\n  this.flickity.dispatchEvent( 'lazyLoad', event, cellElem );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.LazyLoader = LazyLoader;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Flickity v2.0.10\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * http://flickity.metafizzy.co\r\n * Copyright 2017 Metafizzy\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/index',[\r\n      './flickity',\r\n      './drag',\r\n      './prev-next-button',\r\n      './page-dots',\r\n      './player',\r\n      './add-remove-cell',\r\n      './lazyload'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('./flickity'),\r\n      require('./drag'),\r\n      require('./prev-next-button'),\r\n      require('./page-dots'),\r\n      require('./player'),\r\n      require('./add-remove-cell'),\r\n      require('./lazyload')\r\n    );\r\n  }\r\n\r\n})( window, function factory( Flickity ) {\r\n  /*jshint strict: false*/\r\n  return Flickity;\r\n});\r\n\r\n/*!\r\n * Flickity asNavFor v2.0.1\r\n * enable asNavFor for Flickity\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true*/\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity-as-nav-for/as-nav-for',[\r\n      'flickity/js/index',\r\n      'fizzy-ui-utils/utils'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( Flickity, utils ) {\r\n\r\n\r\n\r\n// -------------------------- asNavFor prototype -------------------------- //\r\n\r\n// Flickity.defaults.asNavFor = null;\r\n\r\nFlickity.createMethods.push('_createAsNavFor');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createAsNavFor = function() {\r\n  this.on( 'activate', this.activateAsNavFor );\r\n  this.on( 'deactivate', this.deactivateAsNavFor );\r\n  this.on( 'destroy', this.destroyAsNavFor );\r\n\r\n  var asNavForOption = this.options.asNavFor;\r\n  if ( !asNavForOption ) {\r\n    return;\r\n  }\r\n  // HACK do async, give time for other flickity to be initalized\r\n  var _this = this;\r\n  setTimeout( function initNavCompanion() {\r\n    _this.setNavCompanion( asNavForOption );\r\n  });\r\n};\r\n\r\nproto.setNavCompanion = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var companion = Flickity.data( elem );\r\n  // stop if no companion or companion is self\r\n  if ( !companion || companion == this ) {\r\n    return;\r\n  }\r\n\r\n  this.navCompanion = companion;\r\n  // companion select\r\n  var _this = this;\r\n  this.onNavCompanionSelect = function() {\r\n    _this.navCompanionSelect();\r\n  };\r\n  companion.on( 'select', this.onNavCompanionSelect );\r\n  // click\r\n  this.on( 'staticClick', this.onNavStaticClick );\r\n\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.navCompanionSelect = function( isInstant ) {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  // select slide that matches first cell of slide\r\n  var selectedCell = this.navCompanion.selectedCells[0];\r\n  var firstIndex = this.navCompanion.cells.indexOf( selectedCell );\r\n  var lastIndex = firstIndex + this.navCompanion.selectedCells.length - 1;\r\n  var selectIndex = Math.floor( lerp( firstIndex, lastIndex,\r\n    this.navCompanion.cellAlign ) );\r\n  this.selectCell( selectIndex, false, isInstant );\r\n  // set nav selected class\r\n  this.removeNavSelectedElements();\r\n  // stop if companion has more cells than this one\r\n  if ( selectIndex >= this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var selectedCells = this.cells.slice( firstIndex, lastIndex + 1 );\r\n  this.navSelectedElements = selectedCells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n  this.changeNavSelectedClass('add');\r\n};\r\n\r\nfunction lerp( a, b, t ) {\r\n  return ( b - a ) * t + a;\r\n}\r\n\r\nproto.changeNavSelectedClass = function( method ) {\r\n  this.navSelectedElements.forEach( function( navElem ) {\r\n    navElem.classList[ method ]('is-nav-selected');\r\n  });\r\n};\r\n\r\nproto.activateAsNavFor = function() {\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.removeNavSelectedElements = function() {\r\n  if ( !this.navSelectedElements ) {\r\n    return;\r\n  }\r\n  this.changeNavSelectedClass('remove');\r\n  delete this.navSelectedElements;\r\n};\r\n\r\nproto.onNavStaticClick = function( event, pointer, cellElement, cellIndex ) {\r\n  if ( typeof cellIndex == 'number' ) {\r\n    this.navCompanion.selectCell( cellIndex );\r\n  }\r\n};\r\n\r\nproto.deactivateAsNavFor = function() {\r\n  this.removeNavSelectedElements();\r\n};\r\n\r\nproto.destroyAsNavFor = function() {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  this.navCompanion.off( 'select', this.onNavCompanionSelect );\r\n  this.off( 'staticClick', this.onNavStaticClick );\r\n  delete this.navCompanion;\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * imagesLoaded v4.1.3\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\r\n\r\n( function( window, factory ) { 'use strict';\r\n  // universal module definition\r\n\r\n  /*global define: false, module: false, require: false */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'imagesloaded/imagesloaded',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.imagesLoaded = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n})( typeof window !== 'undefined' ? window : this,\r\n\r\n// --------------------------  factory -------------------------- //\r\n\r\nfunction factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nvar $ = window.jQuery;\r\nvar console = window.console;\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// extend objects\r\nfunction extend( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n}\r\n\r\n// turn element or nodeList into an array\r\nfunction makeArray( obj ) {\r\n  var ary = [];\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    ary = obj;\r\n  } else if ( typeof obj.length == 'number' ) {\r\n    // convert nodeList to array\r\n    for ( var i=0; i < obj.length; i++ ) {\r\n      ary.push( obj[i] );\r\n    }\r\n  } else {\r\n    // array of single index\r\n    ary.push( obj );\r\n  }\r\n  return ary;\r\n}\r\n\r\n// -------------------------- imagesLoaded -------------------------- //\r\n\r\n/**\r\n * @param {Array, Element, NodeList, String} elem\r\n * @param {Object or Function} options - if function, use as callback\r\n * @param {Function} onAlways - callback function\r\n */\r\nfunction ImagesLoaded( elem, options, onAlways ) {\r\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\r\n  if ( !( this instanceof ImagesLoaded ) ) {\r\n    return new ImagesLoaded( elem, options, onAlways );\r\n  }\r\n  // use elem as selector string\r\n  if ( typeof elem == 'string' ) {\r\n    elem = document.querySelectorAll( elem );\r\n  }\r\n\r\n  this.elements = makeArray( elem );\r\n  this.options = extend( {}, this.options );\r\n\r\n  if ( typeof options == 'function' ) {\r\n    onAlways = options;\r\n  } else {\r\n    extend( this.options, options );\r\n  }\r\n\r\n  if ( onAlways ) {\r\n    this.on( 'always', onAlways );\r\n  }\r\n\r\n  this.getImages();\r\n\r\n  if ( $ ) {\r\n    // add jQuery Deferred object\r\n    this.jqDeferred = new $.Deferred();\r\n  }\r\n\r\n  // HACK check async to allow time to bind listeners\r\n  setTimeout( function() {\r\n    this.check();\r\n  }.bind( this ));\r\n}\r\n\r\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\r\n\r\nImagesLoaded.prototype.options = {};\r\n\r\nImagesLoaded.prototype.getImages = function() {\r\n  this.images = [];\r\n\r\n  // filter & find items if we have an item selector\r\n  this.elements.forEach( this.addElementImages, this );\r\n};\r\n\r\n/**\r\n * @param {Node} element\r\n */\r\nImagesLoaded.prototype.addElementImages = function( elem ) {\r\n  // filter siblings\r\n  if ( elem.nodeName == 'IMG' ) {\r\n    this.addImage( elem );\r\n  }\r\n  // get background image on element\r\n  if ( this.options.background === true ) {\r\n    this.addElementBackgroundImages( elem );\r\n  }\r\n\r\n  // find children\r\n  // no non-element nodes, #143\r\n  var nodeType = elem.nodeType;\r\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\r\n    return;\r\n  }\r\n  var childImgs = elem.querySelectorAll('img');\r\n  // concat childElems to filterFound array\r\n  for ( var i=0; i < childImgs.length; i++ ) {\r\n    var img = childImgs[i];\r\n    this.addImage( img );\r\n  }\r\n\r\n  // get child background images\r\n  if ( typeof this.options.background == 'string' ) {\r\n    var children = elem.querySelectorAll( this.options.background );\r\n    for ( i=0; i < children.length; i++ ) {\r\n      var child = children[i];\r\n      this.addElementBackgroundImages( child );\r\n    }\r\n  }\r\n};\r\n\r\nvar elementNodeTypes = {\r\n  1: true,\r\n  9: true,\r\n  11: true\r\n};\r\n\r\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\r\n    return;\r\n  }\r\n  // get url inside url(\"...\")\r\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\r\n  var matches = reURL.exec( style.backgroundImage );\r\n  while ( matches !== null ) {\r\n    var url = matches && matches[2];\r\n    if ( url ) {\r\n      this.addBackground( url, elem );\r\n    }\r\n    matches = reURL.exec( style.backgroundImage );\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Image} img\r\n */\r\nImagesLoaded.prototype.addImage = function( img ) {\r\n  var loadingImage = new LoadingImage( img );\r\n  this.images.push( loadingImage );\r\n};\r\n\r\nImagesLoaded.prototype.addBackground = function( url, elem ) {\r\n  var background = new Background( url, elem );\r\n  this.images.push( background );\r\n};\r\n\r\nImagesLoaded.prototype.check = function() {\r\n  var _this = this;\r\n  this.progressedCount = 0;\r\n  this.hasAnyBroken = false;\r\n  // complete if no images\r\n  if ( !this.images.length ) {\r\n    this.complete();\r\n    return;\r\n  }\r\n\r\n  function onProgress( image, elem, message ) {\r\n    // HACK - Chrome triggers event before object properties have changed. #83\r\n    setTimeout( function() {\r\n      _this.progress( image, elem, message );\r\n    });\r\n  }\r\n\r\n  this.images.forEach( function( loadingImage ) {\r\n    loadingImage.once( 'progress', onProgress );\r\n    loadingImage.check();\r\n  });\r\n};\r\n\r\nImagesLoaded.prototype.progress = function( image, elem, message ) {\r\n  this.progressedCount++;\r\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\r\n  // progress event\r\n  this.emitEvent( 'progress', [ this, image, elem ] );\r\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\r\n    this.jqDeferred.notify( this, image );\r\n  }\r\n  // check if completed\r\n  if ( this.progressedCount == this.images.length ) {\r\n    this.complete();\r\n  }\r\n\r\n  if ( this.options.debug && console ) {\r\n    console.log( 'progress: ' + message, image, elem );\r\n  }\r\n};\r\n\r\nImagesLoaded.prototype.complete = function() {\r\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\r\n  this.isComplete = true;\r\n  this.emitEvent( eventName, [ this ] );\r\n  this.emitEvent( 'always', [ this ] );\r\n  if ( this.jqDeferred ) {\r\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\r\n    this.jqDeferred[ jqMethod ]( this );\r\n  }\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nfunction LoadingImage( img ) {\r\n  this.img = img;\r\n}\r\n\r\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\r\n\r\nLoadingImage.prototype.check = function() {\r\n  // If complete is true and browser supports natural sizes,\r\n  // try to check for image status manually.\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    // report based on naturalWidth\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    return;\r\n  }\r\n\r\n  // If none of the checks above matched, simulate loading on detached element.\r\n  this.proxyImage = new Image();\r\n  this.proxyImage.addEventListener( 'load', this );\r\n  this.proxyImage.addEventListener( 'error', this );\r\n  // bind to image as well for Firefox. #191\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.proxyImage.src = this.img.src;\r\n};\r\n\r\nLoadingImage.prototype.getIsImageComplete = function() {\r\n  return this.img.complete && this.img.naturalWidth !== undefined;\r\n};\r\n\r\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.img, message ] );\r\n};\r\n\r\n// ----- events ----- //\r\n\r\n// trigger specified handler for event type\r\nLoadingImage.prototype.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\nLoadingImage.prototype.onload = function() {\r\n  this.confirm( true, 'onload' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.onerror = function() {\r\n  this.confirm( false, 'onerror' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.unbindEvents = function() {\r\n  this.proxyImage.removeEventListener( 'load', this );\r\n  this.proxyImage.removeEventListener( 'error', this );\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\n// -------------------------- Background -------------------------- //\r\n\r\nfunction Background( url, element ) {\r\n  this.url = url;\r\n  this.element = element;\r\n  this.img = new Image();\r\n}\r\n\r\n// inherit LoadingImage prototype\r\nBackground.prototype = Object.create( LoadingImage.prototype );\r\n\r\nBackground.prototype.check = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.img.src = this.url;\r\n  // check if image is already complete\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    this.unbindEvents();\r\n  }\r\n};\r\n\r\nBackground.prototype.unbindEvents = function() {\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\nBackground.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.element, message ] );\r\n};\r\n\r\n// -------------------------- jQuery -------------------------- //\r\n\r\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\r\n  jQuery = jQuery || window.jQuery;\r\n  if ( !jQuery ) {\r\n    return;\r\n  }\r\n  // set local variable\r\n  $ = jQuery;\r\n  // $().imagesLoaded()\r\n  $.fn.imagesLoaded = function( options, callback ) {\r\n    var instance = new ImagesLoaded( this, options, callback );\r\n    return instance.jqDeferred.promise( $(this) );\r\n  };\r\n};\r\n// try making plugin\r\nImagesLoaded.makeJQueryPlugin();\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nreturn ImagesLoaded;\r\n\r\n});\r\n\r\n/*!\r\n * Flickity imagesLoaded v2.0.0\r\n * enables imagesLoaded option for Flickity\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( [\r\n      'flickity/js/index',\r\n      'imagesloaded/imagesloaded'\r\n    ], function( Flickity, imagesLoaded ) {\r\n      return factory( window, Flickity, imagesLoaded );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('flickity'),\r\n      require('imagesloaded')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.imagesLoaded\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, imagesLoaded ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createImagesLoaded');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createImagesLoaded = function() {\r\n  this.on( 'activate', this.imagesLoaded );\r\n};\r\n\r\nproto.imagesLoaded = function() {\r\n  if ( !this.options.imagesLoaded ) {\r\n    return;\r\n  }\r\n  var _this = this;\r\n  function onImagesLoadedProgress( instance, image ) {\r\n    var cell = _this.getParentCell( image.img );\r\n    _this.cellSizeChange( cell && cell.element );\r\n    if ( !_this.options.freeScroll ) {\r\n      _this.positionSliderAtSelected();\r\n    }\r\n  }\r\n  imagesLoaded( this.slider ).on( 'progress', onImagesLoadedProgress );\r\n};\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n"]}